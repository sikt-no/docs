<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-iam/integrasjoner/TopDesk" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">TopDesk | Sikt teknisk dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.sikt.no/docs/iam/integrasjoner/TopDesk"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TopDesk | Sikt teknisk dokumentasjon"><meta data-rh="true" name="description" content="PortalLDAPToTopDesk"><meta data-rh="true" property="og:description" content="PortalLDAPToTopDesk"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.sikt.no/docs/iam/integrasjoner/TopDesk"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/iam/integrasjoner/TopDesk" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/iam/integrasjoner/TopDesk" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"TopDesk","item":"https://docs.sikt.no/docs/iam/integrasjoner/TopDesk"}]}</script><link rel="stylesheet" href="/assets/css/styles.fe75318c.css">
<script src="/assets/js/runtime~main.0da6b42f.js" defer="defer"></script>
<script src="/assets/js/main.0e01cbbd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/sikt_logo.svg"><link rel="preload" as="image" href="/img/sikt_logo_white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sikt_logo.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/sikt_logo_white.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">teknisk dokumentasjon</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/"><span title="Identitets og tilgangsstyring (Felles IAM)" class="linkLabel_WmDU">Identitets og tilgangsstyring (Felles IAM)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/gevinster"><span title="Gevinster ved Felles IAM" class="linkLabel_WmDU">Gevinster ved Felles IAM</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iam/ansvar"><span title="Prosessinformasjon" class="categoryLinkLabel_W154">Prosessinformasjon</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iam/produkt"><span title="Produktinformasjon" class="categoryLinkLabel_W154">Produktinformasjon</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iam/kontoaktivering"><span title="Brukerinformasjon" class="categoryLinkLabel_W154">Brukerinformasjon</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/livssyklus"><span title="Livssyklus for identitet og tilgang" class="linkLabel_WmDU">Livssyklus for identitet og tilgang</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/brukernavn"><span title="Brukernavn og bruker-ID" class="linkLabel_WmDU">Brukernavn og bruker-ID</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/virksomhetsroller"><span title="Virksomhetsroller" class="linkLabel_WmDU">Virksomhetsroller</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iam/deputy"><span title="Funksjonsbeskrivelser" class="categoryLinkLabel_W154">Funksjonsbeskrivelser</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/iam/integrasjoner/Active Directory"><span title="Integrasjoner" class="categoryLinkLabel_W154">Integrasjoner</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Active Directory"><span title="Active Directory" class="linkLabel_WmDU">Active Directory</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Alma"><span title="Alma" class="linkLabel_WmDU">Alma</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Apex"><span title="Apex" class="linkLabel_WmDU">Apex</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Berghansen"><span title="Berg Hansen" class="linkLabel_WmDU">Berg Hansen</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Berg_Hansen_deprecated"><span title="Berg Hansen (deprecated)" class="linkLabel_WmDU">Berg Hansen (deprecated)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Cristin"><span title="Cristin" class="linkLabel_WmDU">Cristin</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Canvas"><span title="Canvas" class="linkLabel_WmDU">Canvas</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Google"><span title="Google" class="linkLabel_WmDU">Google</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/GREG"><span title="GREG" class="linkLabel_WmDU">GREG</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/IknowBase"><span title="IknowBase" class="linkLabel_WmDU">IknowBase</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/inspera"><span title="Inspera" class="linkLabel_WmDU">Inspera</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Integra"><span title="Integra" class="linkLabel_WmDU">Integra</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Lenel API"><span title="Lenel API" class="linkLabel_WmDU">Lenel API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Lenel DB"><span title="Lenel DB" class="linkLabel_WmDU">Lenel DB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Officephone"><span title="OfficePhone" class="linkLabel_WmDU">OfficePhone</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Pureservice"><span title="PureService" class="linkLabel_WmDU">PureService</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Salto"><span title="Salto" class="linkLabel_WmDU">Salto</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Servicenow"><span title="ServiceNow" class="linkLabel_WmDU">ServiceNow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/iam/integrasjoner/TopDesk"><span title="TopDesk" class="linkLabel_WmDU">TopDesk</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Wiseflow"><span title="WISEflow" class="linkLabel_WmDU">WISEflow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Writebacktodfo"><span title="WritebackToDFO" class="linkLabel_WmDU">WritebackToDFO</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iam/integrasjoner/Writebacktofs"><span title="WritebackToFS" class="linkLabel_WmDU">WritebackToFS</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iam/versjoner/g4"><span title="Versjoner" class="categoryLinkLabel_W154">Versjoner</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iam/referanser"><span title="Referanser" class="linkLabel_WmDU">Referanser</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Integrasjoner</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">TopDesk</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TopDesk</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="portalldaptotopdesk">PortalLDAPToTopDesk<a href="#portalldaptotopdesk" class="hash-link" aria-label="Direct link to PortalLDAPToTopDesk" title="Direct link to PortalLDAPToTopDesk" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="description">Description<a href="#description" class="hash-link" aria-label="Direct link to Description" title="Direct link to Description" translate="no">​</a></h3>
<p>This script synchronizes user data from the Portal LDAP directory to TopDesk. It processes user records, performs necessary transformations, and updates or creates user accounts in TopDesk. The script also handles enabling, disabling, and archiving user accounts based on specific conditions.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="input-parameters">Input Parameters<a href="#input-parameters" class="hash-link" aria-label="Direct link to Input Parameters" title="Direct link to Input Parameters" translate="no">​</a></h3>
<ul>
<li class=""><code>key_field</code>: String (optional)</li>
<li class=""><code>key_value</code>: String (optional)</li>
<li class=""><code>process_total</code>: Number (optional)</li>
<li class=""><code>log_only</code>: Boolean (optional)</li>
<li class=""><code>report_file</code>: Boolean (optional)</li>
<li class=""><code>debug</code>: Boolean (optional)</li>
<li class=""><code>reprocess_all</code>: Boolean (optional)</li>
<li class=""><code>reprocess_unprovisioned_users</code>: Boolean (optional)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-variables">Local Variables<a href="#local-variables" class="hash-link" aria-label="Direct link to Local Variables" title="Direct link to Local Variables" translate="no">​</a></h3>
<ul>
<li class=""><code>arrCountryCodesToStrip</code>: Array of country codes to strip from phone numbers.</li>
<li class=""><code>targetSystem</code>: The target system, which is TopDesk.</li>
<li class=""><code>actionSetName</code>: The name of the current action set.</li>
<li class=""><code>fileDate</code>: The current date formatted as <code>yyyyMMdd</code>.</li>
<li class=""><code>total</code>, <code>totalSkipped</code>, <code>totalUnchanged</code>, <code>totalAdd</code>, <code>totalAddFail</code>, <code>totalUpdate</code>, <code>totalUpdateFail</code>, <code>totalEnable</code>, <code>totalEnableFail</code>, <code>totalDisable</code>, <code>totalDisableFail</code>: Counters for tracking various operations and their outcomes.</li>
<li class=""><code>policyFile</code>: The policy file for TopDesk ruleset.</li>
<li class=""><code>processedAccounts</code>: Array to keep track of processed accounts.</li>
<li class=""><code>sessionPortalLDAP</code>: Connection object for Portal LDAP.</li>
<li class=""><code>sessionMV</code>: Connection object for MV (RIDB).</li>
<li class=""><code>extraFieldAEntries</code>, <code>resultBranchRecords</code>, <code>resultDepartmentRecords</code>, <code>resultBudgetHolderRecords</code>, <code>resultArchivingReasons</code>: Arrays to store records fetched from TopDesk.</li>
<li class=""><code>archivingReasonID</code>: ID for the archiving reason.</li>
<li class=""><code>cookie</code>: The cookie used for LDAP change tracking.</li>
<li class=""><code>recordChanges</code>: The set of records fetched from Portal LDAP.</li>
<li class=""><code>recordChange</code>: The current record being processed.</li>
<li class=""><code>recordLDAP</code>: Detailed LDAP record of the current user.</li>
<li class=""><code>isEntitled</code>, <code>isProvisioned</code>, <code>isEntitledReq</code>, <code>isProvisionedReq</code>: Booleans indicating the user&#x27;s entitlements and provisioning status.</li>
<li class=""><code>selectedUsername</code>, <code>selectedEmail</code>: The username and email selected for the user.</li>
<li class=""><code>roles</code>: Array of roles for the user.</li>
<li class=""><code>optionalFields1</code>: Record for optional fields.</li>
<li class=""><code>personExtraFieldA</code>, <code>branch</code>, <code>department</code>, <code>budgetHolder</code>, <code>recordManager</code>, <code>recordPrivateDetails</code>: Records for various attributes.</li>
<li class=""><code>currentID</code>, <code>recordTopDesk</code>, <code>isArchived</code>, <code>currentOperatorID</code>, <code>recordTopDeskOperator</code>, <code>isOperatorArchived</code>, <code>arrayEntitlementsSucessfullyProvisioned</code>, <code>recordEntitlementsSucessfullyDeprovisioned</code>: Variables for handling TopDesk records and statuses.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to Workflow" title="Direct link to Workflow" translate="no">​</a></h3>
<ol>
<li class=""><strong>Initialize Variables</strong></li>
</ol>
<ul>
<li class="">Set initial values for counters and other variables.</li>
<li class="">Adjust <code>key_field</code> and <code>key_value</code> based on input parameters.</li>
</ul>
<ol start="2">
<li class=""><strong>Create Connections</strong></li>
</ol>
<ul>
<li class="">Establish connections to Portal LDAP and MV.</li>
<li class="">Handle connection errors by logging and invoking <code>G3_ErrorHandler</code>.</li>
</ul>
<ol start="3">
<li class=""><strong>Fetch Records from TopDesk</strong></li>
</ol>
<ul>
<li class="">Fetch various records from TopDesk, including branches, departments, budget holders, and archiving reasons.</li>
</ul>
<ol start="4">
<li class=""><strong>Query Records</strong></li>
</ol>
<ul>
<li class="">Fetch records from Portal LDAP based on <code>key_field</code> and <code>key_value</code>.</li>
<li class="">If no specific key is provided, use a change iterator to fetch records.</li>
</ul>
<ol start="5">
<li class=""><strong>Iterate Over Records</strong></li>
</ol>
<ul>
<li class="">For each record, skip if the change type is &quot;delete&quot;.</li>
<li class="">Fetch detailed LDAP record and skip if essential attributes are missing.</li>
<li class="">Determine user entitlements and provisioning status.</li>
<li class="">Log processing information.</li>
</ul>
<ol start="6">
<li class=""><strong>Transform Record</strong></li>
</ol>
<ul>
<li class="">Perform static and dynamic transformations on the record.</li>
<li class="">Set various attributes like <code>firstName</code>, <code>surName</code>, <code>jobTitle</code>, <code>networkLoginName</code>, <code>email</code>, <code>mobileNumber</code>, etc.</li>
<li class="">Create and set records for branch, department, budget holder, manager, and private details.</li>
</ul>
<ol start="7">
<li class=""><strong>Query System For User</strong></li>
</ol>
<ul>
<li class="">Check for a current ID and query TopDesk for the user based on the information available.</li>
<li class="">Handle the results and update the record with the ID if found.</li>
</ul>
<ol start="8">
<li class=""><strong>Logging and Reporting</strong></li>
</ol>
<ul>
<li class="">Log the record and update counters based on the operation performed.</li>
<li class="">Write the record to the report file if <code>report_file</code> is enabled.</li>
</ul>
<ol start="9">
<li class=""><strong>Save the Person Record to TopDesk</strong></li>
</ol>
<ul>
<li class="">Save the person record to TopDesk and handle enabling, disabling, and archiving based on entitlements and provisioning status.</li>
</ul>
<ol start="10">
<li class=""><strong>Operator Sync</strong></li>
</ol>
<ul>
<li class="">Create and update operator records in TopDesk based on entitlements and provisioning status.</li>
</ul>
<ol start="11">
<li class=""><strong>Deprovision Requestables</strong></li>
</ol>
<ul>
<li class="">Deprovision requestable entitlements if necessary and update Portal LDAP.</li>
</ul>
<ol start="12">
<li class=""><strong>Archive Operator</strong></li>
</ol>
<ul>
<li class="">Archive operator and person records if all entitlements are successfully deprovisioned.</li>
</ul>
<ol start="13">
<li class=""><strong>Close Connections</strong></li>
</ol>
<ul>
<li class="">Close all established connections to Portal LDAP and MV.</li>
</ul>
<ol start="14">
<li class=""><strong>Log Results</strong></li>
</ol>
<ul>
<li class="">Log the results of the synchronization process, including totals for each operation and failures.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="external-systems-and-communications">External Systems and Communications<a href="#external-systems-and-communications" class="hash-link" aria-label="Direct link to External Systems and Communications" title="Direct link to External Systems and Communications" translate="no">​</a></h3>
<ul>
<li class=""><strong>Portal LDAP</strong>: Used to fetch user records and update user attributes.</li>
<li class=""><strong>MV (RIDB)</strong>: Used to query organizational levels.</li>
<li class=""><strong>TopDesk</strong>: The target system where user accounts are created, updated, enabled, disabled, and archived.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="response-codesoutputs">Response Codes/Outputs<a href="#response-codesoutputs" class="hash-link" aria-label="Direct link to Response Codes/Outputs" title="Direct link to Response Codes/Outputs" translate="no">​</a></h3>
<ul>
<li class="">None explicitly mentioned.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h3>
<p>This script synchronizes user data from the Portal LDAP directory to TopDesk. It handles various operations such as creating, updating, enabling, disabling, and archiving user accounts based on specific conditions. The script ensures data consistency and logs detailed results of the synchronization process.</p>
<p>This text was generated by AI.</p>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/sikt-no/docs/tree/master/docs/iam/integrasjoner/TopDesk.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-11-06T12:58:51.000Z" itemprop="dateModified">Nov 6, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/iam/integrasjoner/Servicenow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ServiceNow</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/iam/integrasjoner/Wiseflow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WISEflow</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#portalldaptotopdesk" class="table-of-contents__link toc-highlight">PortalLDAPToTopDesk</a><ul><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#input-parameters" class="table-of-contents__link toc-highlight">Input Parameters</a></li><li><a href="#local-variables" class="table-of-contents__link toc-highlight">Local Variables</a></li><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a></li><li><a href="#external-systems-and-communications" class="table-of-contents__link toc-highlight">External Systems and Communications</a></li><li><a href="#response-codesoutputs" class="table-of-contents__link toc-highlight">Response Codes/Outputs</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sikt Docs</div><ul class="footer__items clean-list"><li class="footer__item"><p>Teknisk dokumentasjon på fellesløsningene Sikt leverer for utdanning og forskning.</p></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hvordan bidra?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-directly-from-the-web-browser" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet fra nettleseren</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-locally" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet lokalt</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Opprette en issue i GitHub</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Kontaktinformasjon</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sikt.no/kontakt-oss" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kontakt oss</a></li><li class="footer__item"><a href="https://sikt.no/om-sikt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Om Sikt</a></li><li class="footer__item"><a href="https://sikt.no/personvernerklaering" target="_blank" rel="noopener noreferrer" class="footer__link-item">Personvernerklæring</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="104" height="28"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="104" height="28"></div><div class="footer__copyright">Copyright © 2025 Sikt – Kunnskapssektorens tjenesteleverandør</div></div></div></footer></div>
</body>
</html>