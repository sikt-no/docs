<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-nettadministrasjon/brukerdok" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Brukerdokumentasjon Verktøykasser | Sikt teknisk dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.sikt.no/docs/nettadministrasjon/brukerdok"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Brukerdokumentasjon Verktøykasser | Sikt teknisk dokumentasjon"><meta data-rh="true" name="description" content="Innledning"><meta data-rh="true" property="og:description" content="Innledning"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.sikt.no/docs/nettadministrasjon/brukerdok"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/nettadministrasjon/brukerdok" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/nettadministrasjon/brukerdok" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.fc42a4b9.css">
<script src="/assets/js/runtime~main.af72a740.js" defer="defer"></script>
<script src="/assets/js/main.a9c6ff39.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sikt_logo.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/sikt_logo_white.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">teknisk dokumentasjon</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/">Nettadministrasjon - Verktøykasse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/nettadministrasjon/brukerdok">Brukerdokumentasjon Verktøykasser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/xymon">Xymon-integrasjon på verktøykasser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/fwbuilder">Firewall builder</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Brukerdokumentasjon Verktøykasser</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Brukerdokumentasjon Verktøykasser</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="innledning">Innledning<a href="#innledning" class="hash-link" aria-label="Direct link to Innledning" title="Direct link to Innledning">​</a></h2>
<p>Dette dokument er myntet på lokalt IKT driftspersonell ved
høgskole/universitet som er bruker av verktøykassen. Verktøykassene er
som kjent drevet fra Sikt. Driftsinstruks for Sikt Service Center og
beredskapsvakt <a href="https://kind.uninett.no/driftwiki/instruks/vk/index.html" target="_blank" rel="noopener noreferrer">foreligger i
tillegg</a>. Se Sikts nettsider <a href="https://sikt.no/tjenester/nettadministrasjon" target="_blank" rel="noopener noreferrer">for
en generell beskrivelse av tjenesten</a>.</p>
<p>For å benytte flere av tjenestene på verktøykassen kreves naturlig nok
relevant konfigurasjon av nettutstyret. Vi viser til <a href="https://www.uninett.no/ufs/nett" target="_blank" rel="noopener noreferrer">Uninett
fagspesifikasjoner (UFS-er)</a>.</p>
<p>Vi minner også om at svitsjene i campusnettet bør (les: <em>må</em>) være på en
forsvarlig programvareversjon.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vedlikeholdsvindu">Vedlikeholdsvindu<a href="#vedlikeholdsvindu" class="hash-link" aria-label="Direct link to Vedlikeholdsvindu" title="Direct link to Vedlikeholdsvindu">​</a></h2>
<p>Tjenesten har fast vedlikeholdsvindu på <strong>tirsdager mellom klokken 10:00
og 11:00</strong>.</p>
<p>I dette tidsrommet kan det bli utført mindre oppgraderinger og omstart
av maskinvaren, hovedsakelig i forbindelse med sikkerhetsoppdateringer,
uten at det blir gitt nærmere beskjed i forkant. Det kan forekomme
merkbare driftsforstyrrelser.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sikkerhetsdirektiv-for-verktøykassene">Sikkerhetsdirektiv for verktøykassene<a href="#sikkerhetsdirektiv-for-verktøykassene" class="hash-link" aria-label="Direct link to Sikkerhetsdirektiv for verktøykassene" title="Direct link to Sikkerhetsdirektiv for verktøykassene">​</a></h2>
<p>Sikt har driftsansvar for verktøykassene, se definert
<a href="/docs/nettadministrasjon/sikkerhetsdirektiv">sikkerhetsdirektiv</a> for detaljer rundt drift-
og sikkerhetsopplegget.</p>
<p>Siden driftsansvaret ligger til Sikt er ryddigste løsning at <em>kun</em> Sikt
har root-privilegier på verktøykassene. Vi er naturligvis opptatt av at
dere som brukere kan gjøre tilstrekkelig for å rette feil rundt
applikasjonene m.m. Dette gjør vi ved å gi dere nødvendige
sudo-rettigheter, samt lesetilgang til filer (se Brukertilgang under).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kontaktpunkt">Kontaktpunkt<a href="#kontaktpunkt" class="hash-link" aria-label="Direct link to Kontaktpunkt" title="Direct link to Kontaktpunkt">​</a></h3>
<ul>
<li>For driftshenvendelser, ta kontakt med <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a></li>
<li>For diskusjon/spørsmål om bruk av verktøyene, bruk
<a href="mailto:vk@lister.sikt.no" target="_blank" rel="noopener noreferrer">vk@lister.sikt.no</a>.
Alle som er registrert i Sikts driftsdatabase som teknisk ansvarlig
for en verktøykasse ute hos en kunde blir automatisk abonnent på
denne listen.</li>
<li>Se ellers <a href="https://sikt.no/kontakt-oss" target="_blank" rel="noopener noreferrer">kontaktadresser og telefonnumre på våre
hjemmesider</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="brukertilgang-til-verktøykassen">Brukertilgang til verktøykassen<a href="#brukertilgang-til-verktøykassen" class="hash-link" aria-label="Direct link to Brukertilgang til verktøykassen" title="Direct link to Brukertilgang til verktøykassen">​</a></h2>
<p>For å logge inn på verktøykassen med ssh må du ha bruker.  Den som er teknisk
ansvarlig for verktøykassen i din organisasjon kan bestille brukere ved å
sende <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">e-post til kontakt@sikt.no</a>.  Nye brukere vil
få satt et midlertidig passord av Sikt og bør endre dette ved første gangs
innlogging.  Merk at det passordet du velger for denne kontoen er det samme
som vil brukes dersom du setter opp verktøykassen som radiustjener for
nettutstyret ditt.</p>
<p>Alle brukere som er i gruppe <span class="kbd">netops</span> gis (via
<em>sudo</em>) tilgang til å gjøre noen kommandoer som normalt trenger
root-tilgang. For å se hvilke sudo-muligheter man har kan man kjøre
kommandoen:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Blant kommandoene som kan kjøres via sudo er:</p>
<ul>
<li>
<p><code>nav</code>: Generell kommando for å kontrollere nav</p>
</li>
<li>
<p><code>service apache2 reload</code>: Relaste konfigurasjon for webtjeneren</p>
</li>
<li>
<p><code>service nfsen \[start|stop\]</code>: Starte/stoppe NfSen</p>
</li>
</ul>
<p>For å relaste apache webtjeneren kan man feks kjøre kommandoen:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service apache2 reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tftp">tftp<a href="#tftp" class="hash-link" aria-label="Direct link to tftp" title="Direct link to tftp">​</a></h2>
<p><em>tftp</em>-tjenesten gjør det mulig å skrive og laste konfigurasjon til/fra
nettutstyret. <em>tftp</em>-demonen er sikret med en konfigurasjonsfil
<code>/tftpboot/tftpd.conf</code>. For å forenkle vedlikehold blir denne filen
autogenerert etter følgende kjøreregler.</p>
<p>Når en ny svitsj skal legges til i tftp konfigurasjonen:</p>
<ol>
<li>
<p>Legg til svitsjen i <code>/tftpboot/tftpd.txt</code> Syntaks sees lett i fila:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;svitsj&quot;           &quot;ipadresse&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eks:    lillehammer-gsw     128.39.3.44</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Etter at <code>tftpd.txt</code> er redigert, kjør make (du står på <code>/tftpboot</code>)
Vips, så er ny <code>tftp.conf</code> laget.</p>
</li>
<li>
<p>Du må da opprette den nye filen med touch &quot;svitsj-confg&quot; (eks: <code>touch lillehammer-gsw-confg</code>)</p>
</li>
<li>
<p>Nå kan du fra svitsjen skrive konfigurasjonen til verktøykasse med
write network.</p>
</li>
</ol>
<p>Tilsvarende kan bokser slettes fra <code>tftpd.txt</code> / <code>tftpd.conf</code>.</p>
<p>For å bevare historikk på konfigurasjon benyttes <em>RCS</em>. Opplegget er
automatisert ved at en nattlig cronjobb sjekker inn ny versjon av alle
filer som er endret. Alle endringer blir rapportert som epost til
mottagere angitt via variabelen nocoperators i fila
<code>/etc/default/uninett.conf</code> (merk at denne filen er styrt av Sikts Puppet,
ta kontakt med <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a> for å få gjort endringer). En varsling
om låste RCS-filer (avglemte innsjekkinger) blir også sendt periodisk
til samme adresse.</p>
<ul>
<li>I tillegg til konfigurasjoner ligger også aksesslistefiler på
<code>/tftpboot</code>. Vedlikehold av disse og arbeid med aksesslister generelt
er ikke omtalt her. Se <code>README</code>-fil på <code>/tftpboot</code> for mer info på
dette.</li>
<li>En siste ting som ligger på <code>/tftpboot</code> er software-imager. Disse kan
lastes til svitsjer for oppgradering.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ftp">FTP<a href="#ftp" class="hash-link" aria-label="Direct link to FTP" title="Direct link to FTP">​</a></h2>
<p>Fra 2023 er en <em>FTP</em>-tjener (basert på <em>proftpd</em>) et nytt mulig tilvalg på
verktøykassen.  Dette kommer som et alternativ til det tftp-baserte
konfigurasjonsarkivet under <code>/tftpboot</code> og kan være nyttig dersom man har
utstyrstyper som ikke støtter (eller fraråder) bruk av tftp-protokollen til å
fjernlagre konfigurasjon eller hente programvare.  Foreløpig gjelder dette mest
Juniper-utstyr.</p>
<p>For å ta i bruk FTP-tjeneren på din verktøykasse må man be Sikt om å slå den på
først, ved å kontakte <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oppsettet-av-ftp-tjeneren">Oppsettet av FTP-tjeneren<a href="#oppsettet-av-ftp-tjeneren" class="hash-link" aria-label="Direct link to Oppsettet av FTP-tjeneren" title="Direct link to Oppsettet av FTP-tjeneren">​</a></h3>
<p>FTP-tjeneren vil servere filer fra katalogen <code>/tftpboot</code>.  Den er i
utgangspunktet satt opp med èn anonym bruker og en autentisert bruker, som har
forskjellige tilgangsnivåer.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="anonym-bruker">Anonym bruker<a href="#anonym-bruker" class="hash-link" aria-label="Direct link to Anonym bruker" title="Direct link to Anonym bruker">​</a></h4>
<p>Anonym FTP tillates, men den anonyme brukeren vil kun ha lesetilgang til filer
som eies av systembrukeren <code>ftp</code>, og ingen skrivetilgang.  I utganspunktet vil
bare katalogen <code>/tftptboot/images</code> være lesbar for denne brukeren.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ftpuser">ftpuser<a href="#ftpuser" class="hash-link" aria-label="Direct link to ftpuser" title="Direct link to ftpuser">​</a></h4>
<p>Den autentiserte brukerkontoen heter <code>ftpuser</code>, som samsvarer med OS-brukeren
<code>ftpuser</code>.  I tilfellet verktøykassen er en CNaaS-kasse, vil denne brukerens
passord styres fra Vault.  I alle andre tilfeller må man sette passordet for
brukeren lokalt på verktøykassen. Dette kan gjøres av alle brukere som er
medlem av gruppen <code>netops</code>, ved å kjøre kommandoen <code>sudo passwd ftpuser</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="radius">Radius<a href="#radius" class="hash-link" aria-label="Direct link to Radius" title="Direct link to Radius">​</a></h2>
<p>Det er ingen bruker-konfigurasjon forbundet med radius som trengs å
konfigureres på verktøykassene. Dette fordi radius er satt opp til bruke
<code>/etc/passwd</code> som sin brukerkilde. Dersom brukerne her har satt passord
blir dette benyttet ved radiusautentisering. Dersom bruker på
nettutstyret logger seg på med <code>@uninett.no</code>-endelse så er radiustjener på
verktøykassen satt opp til å relée forespørsler til radiustjener på
<code>trane.uninett.no</code>. Således kan Sikt drift komme inn (dersom ønskelig).</p>
<p>Det som imidlertid <em>må</em> konfigureres er <code>/etc/freeradius/clients.conf</code></p>
<p>Eksempel fra HiL:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client 128.39.109.0/26 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   secret       = felles-hemmelighet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   shortname    = hil-mngmt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Det vi angir her at alle svitsjene i området 128.39.109.1-63 tillates å
snakke radius med verktøykassen gitt at de er konfigurert med samme
felles-hemmelighet. Endringer i <code>/etc/freeradius/clients.conf</code> styres med
Puppet og må meldes inn til <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="syslog">Syslog<a href="#syslog" class="hash-link" aria-label="Direct link to Syslog" title="Direct link to Syslog">​</a></h2>
<p>All nettelektronikk bør syslogge til verktøykassen. Syslog er satt opp
slik at alle meldinger logget til verktøykassen fra nettverket på
facility <code>local6</code> og <code>local7</code> blir lagret i disse to filene:</p>
<ul>
<li><code>/var/log/network.log</code></li>
<li><code>/var/log/network_nav.log</code></li>
</ul>
<p>Sistnevnte fil blir igjen lest og tømt av NAV sin bakgrunnsprosess
<code>logengine</code>, som kjører én gang i minuttet. Dataene blir lagt i NAVs
syslog-database og er igjen søkbare gjennom NAVs <em>Syslog Analyzer tool</em>.</p>
<p><code>network.log</code> blir ikke tømt, men komprimert og rotert en gang i døgnet.
Dere kan således velge å søke i syslog i tekstmodus, direkte på
verktøykassen, eller via NAV.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nav">NAV<a href="#nav" class="hash-link" aria-label="Direct link to NAV" title="Direct link to NAV">​</a></h2>
<p>NAV er omfattende å forklare. Vi viser her til <a href="https://nav.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">NAVs egen
dokumentasjon</a>. Litt starthjelp:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-brukeradministrasjon">Web brukeradministrasjon<a href="#web-brukeradministrasjon" class="hash-link" aria-label="Direct link to Web brukeradministrasjon" title="Direct link to Web brukeradministrasjon">​</a></h3>
<p>Det er ikke noe dokument som beskriver hvordan du oppretter brukere og
hvordan du tilordner brukere til grupper. Helt kort; dette gjør du under
verktøyet <em>User and API Administration</em>. Det er rett frem å legge til
brukere, men husk at de må tilordnes en eller flere grupper. Merk også
at du kan redigere privilegiene til en gruppe. Se f.eks på gruppen
<em>ReadAll</em>, her vil du se at denne har et <code>web_access</code>-privilegie som gir
tilgang til en del verktøy, men ikke alle. Dette gir deg en ide om
hvordan <code>web_access</code>-privilegier kan justeres. Merk at det er mulig å
bruke LDAP til brukerautentisering. Du må da gjøre innstillinger i fila
<code>/etc/nav/webfront/webfront.conf</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sett-velkomstmelding-mm">Sett velkomstmelding m.m.<a href="#sett-velkomstmelding-mm" class="hash-link" aria-label="Direct link to Sett velkomstmelding m.m." title="Direct link to Sett velkomstmelding m.m.">​</a></h3>
<p>En rekke filer i katalogen <code>/etc/nav/webfront/</code> kan redigeres for å
tilpasse innholdet i forside-widgetene for velkomstmelding og lenker.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sett-mottaker-av-nav-adminstrativ-epost">Sett mottaker av NAV-adminstrativ epost<a href="#sett-mottaker-av-nav-adminstrativ-epost" class="hash-link" aria-label="Direct link to Sett mottaker av NAV-adminstrativ epost" title="Direct link to Sett mottaker av NAV-adminstrativ epost">​</a></h3>
<p>All administrativ epost fra NAV sendes til driftspersonell hos Sikt, som
konfigurert av <em>Puppet</em> i variabelen <code>ADMIN_MAIL</code> i filen
<code>/etc/nav/nav.conf</code>. Dersom du ønsker kopier av denne eposten, ta
kontakt med Sikt.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sett-passord-til-navs-postgresql-database">Sett passord til NAVs PostgreSQL-database<a href="#sett-passord-til-navs-postgresql-database" class="hash-link" aria-label="Direct link to Sett passord til NAVs PostgreSQL-database" title="Direct link to Sett passord til NAVs PostgreSQL-database">​</a></h3>
<p>Dette er satt for deg. Passordet kan leses fra attributten <code>userpw_nav</code>
i filen <code>/etc/nav/db.conf</code>. Merk at du kan aksessere denne databasen ved
å bruke dette passordet når du skriver <code>psql nav nav</code>. For dypere feilsøking, eller dypere forståelse av databasen
er dette nyttig.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="seede-databasen">&quot;Seede&quot; databasen:<a href="#seede-databasen" class="hash-link" aria-label="Direct link to &quot;Seede&quot; databasen:" title="Direct link to &quot;Seede&quot; databasen:">​</a></h3>
<p>For at NAV skal overvåke nettverket ditt må den få &quot;seed&quot;-informasjon
fra deg. Du bruker verktøyet <em>Seed Database</em> (fra Toolbox) til dette.
Les mer om hvordan du <a href="https://nav.readthedocs.io/en/latest/intro/getting-started.html#seeding-your-database" target="_blank" rel="noopener noreferrer">legger inn seed-data i
NAV</a>
og <a href="https://nav.readthedocs.io/en/latest/intro/getting-organized.html" target="_blank" rel="noopener noreferrer">hvordan du organiserer
informasjonen</a>
i NAVs offisielle dokumentasjon.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="varslingssystemet-alert-profiles">Varslingssystemet Alert Profiles<a href="#varslingssystemet-alert-profiles" class="hash-link" aria-label="Direct link to Varslingssystemet Alert Profiles" title="Direct link to Varslingssystemet Alert Profiles">​</a></h3>
<p>Varslingssystemet er nokså omfattende med mange muligheter. For å
forenkle initielt oppsett er det en rekke forhåndsdefinerte filtre og
filtergrupper du kan bruke. Les <a href="https://nav.uninett.no/wiki/alertprofiles" target="_blank" rel="noopener noreferrer">wiki-siden om Alert
Profiles</a> for en introduksjon
til systemet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sjekk-status-på-bakgrunnsprosesser-og-logger">Sjekk status på bakgrunnsprosesser og logger<a href="#sjekk-status-på-bakgrunnsprosesser-og-logger" class="hash-link" aria-label="Direct link to Sjekk status på bakgrunnsprosesser og logger" title="Direct link to Sjekk status på bakgrunnsprosesser og logger">​</a></h3>
<ul>
<li>Kommandoen <code>sudo nav status</code> gir status på om
NAVs ulike bakgrunnsprosesser og cronjobber er aktive.</li>
<li>Innsamlingsmotoren <em>ipdevpoll</em> logger (bl.a.) til
<code>/var/log/nav/ipdevpoll.log </code></li>
<li>I samme katalog se tilsvarende log for <code>navtopology.log</code>
(topologioppdageren) <code>pping.log</code> (statusmonitoren), <code>servicemon.log</code>
(tjenesteovervåkeren), <code>thresholdmon.log</code> (terskelovervåkeren),
<code>eventengine.log</code> (hendelsessystemet) og <code>alertengine.log</code>
(alarmsystemet).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feilsøking-av-mobiltelefonsms-utsending">Feilsøking av mobiltelefon/SMS-utsending<a href="#feilsøking-av-mobiltelefonsms-utsending" class="hash-link" aria-label="Direct link to Feilsøking av mobiltelefon/SMS-utsending" title="Direct link to Feilsøking av mobiltelefon/SMS-utsending">​</a></h3>
<p>Dersom du har problemer med utsending av SMS fra verktøykassen, kan du
gjøre litt førstelinjes feilsøking før du feilmelder situasjonen til
<a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a>.</p>
<ul>
<li>
<p>Dersom mobilen/GSM-enheten er koblet til med en USB, verifisér at
mobilen/GSM-enheten er synlig på USB-bussen: <code>lsusb</code></p>
<p>Forventet output skal ligne på dette</p>
<p>Bus 004 Device 001: ID 0000:0000
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 003: ID 0fce<!-- -->:d057<!-- --> Sony Ericsson Mobile Communications AB
Bus 001 Device 001: ID 0000:0000</p>
<p>Dersom det er en GSM-enhet tilkoblet med USB-dongle er det donglen,
og ikke GSM-enheten som blir identifisert. Se siste linje:</p>
<p>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 002: ID 0a81:0205 Chesen Electronics Corp. PS/2 Keyboard+Mouse Adapter
Bus 005 Device 003: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC</p>
</li>
<li>
<p>Verifisér at Gammu klarer å gjenkjenne den tilkoblede
mobiltelefonen: <code>sudo -u navcron gammu --identify</code></p>
</li>
<li>
<p>Verifisér at mobiltelefonen har forbindelse med GSM-nettverket:
<code>sudo -u navcron gammu --networkinfo</code></p>
</li>
<li>
<p>Verifisér at Gammu kan sende SMS-meldinger til din telefon:
<code>echo &quot;Melding&quot; | sudo -u navcron gammu --sendsms TEXT &lt;tlfnr&gt;</code></p>
</li>
<li>
<p>Verifisér at NAVs SMS-daemon kan sende SMS-meldinger til din
telefon: <code>sudo -u navcron smsd.py -t &lt;tlfnr&gt;</code></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sette-opp-navverktøykassen-for-radius-accounting-logging">Sette opp NAV/verktøykassen for Radius Accounting-logging<a href="#sette-opp-navverktøykassen-for-radius-accounting-logging" class="hash-link" aria-label="Direct link to Sette opp NAV/verktøykassen for Radius Accounting-logging" title="Direct link to Sette opp NAV/verktøykassen for Radius Accounting-logging">​</a></h3>
<p>NAV tilbyr <a href="https://nav.uninett.no/wiki/radius" target="_blank" rel="noopener noreferrer">brukersporing via accounting-logging fra
FreeRADIUS-tjenere</a>. Dette krever en
del aktiv inngripen fra din egen side.</p>
<p>Der man har en FreeRADIUS-tjener som autentiserer brukerinnlogginger, må
denne konfigureres til å logge accounting-data til NAVs
PostgreSQL-database. I tillegg bør man sette opp et Python-program på
FreeRADIUS-tjeneren som overvåker error-loggen dens og dytter disse
innslagene til samme PostgreSQL-database. <a href="https://nav.uninett.no/wiki/radius" target="_blank" rel="noopener noreferrer">Fremgangsmåten er dokumentert
på NAV-wikien.</a></p>
<p>Deretter må Sikt gjøre konfigurasjonsendringer på verktøykassens
PostgreSQL-database, slik at denne tillater innlogging fra din
FreeRADIUS-tjener. Meld inn følgende detaljer til <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a>:</p>
<ul>
<li>At du ønsker å sende FreeRADIUS accounting-logger til verktøykassen.</li>
<li>IP-adressen(e) til din(e) FreeRADIUS-tjener(e).</li>
</ul>
<p>Sikt vil sørge for at det opprettes en PostgreSQL-bruker for radius
accounting, og at denne gis tilgang til de riktige tabellene i NAV fra
de gitte IP-adressene. Du vil få et brukernavn og et passord til
PostgreSQL-databasen, som skal brukes til å konfigurere
FreeRADIUS-tjeneren med.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrasjon-med-argus">Integrasjon med Argus<a href="#integrasjon-med-argus" class="hash-link" aria-label="Direct link to Integrasjon med Argus" title="Direct link to Integrasjon med Argus">​</a></h3>
<p>Dersom du ønsker å integrere NAV-installasjonen på din verktøykasse med en
Argus-instans, kan limetjenesten for dette enkelt slås på for din verktøykasse
ved bestilling til <a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer">kontakt@sikt.no</a>.</p>
<p>Når limetjenesten <code>nav-argus-glue</code> slås på, vil konfigurasjonsfilen
<code>/etc/nav/navargus.yml</code> opprettes og gjøres skrivbar for alle som er medlem av
gruppen <code>netops</code>.  Event Engine vil automatisk konfigureres til å levere
hendelser til limetjenesten.  Dokumentasjon for selve limetjenesten fins på
<a href="https://github.com/Uninett/nav-argus-glue" target="_blank" rel="noopener noreferrer">https://github.com/Uninett/nav-argus-glue</a></p>
<p>Når limetjenesten er konfigurert, kan konnektivitet mot din Argus-instans
testes ved å utføre følgende kommando:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/venvs/nav/bin/navargus --test-api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Vær oppmerksom på at ved konfigurasjonendringer i <code>navargus.yml</code> bør NAVs Event
Engine restartes med kommandoen <code>sudo nav restart eventengine</code> for å sikre at
endringene tar effekt umiddelbart.</p>
<p><code>navargus</code> kan også kjøres manuelt for å ta ut en rapport om hvilke NAV-alarmer
og Argus-hendelser som ikke er synkroniserte, eller for å tvinge gjennom en
full synkronisering.  Se følgende kommando for mer hjelp på dette:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/venvs/nav/bin/navargus --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sertifikathåndtering">Sertifikathåndtering<a href="#sertifikathåndtering" class="hash-link" aria-label="Direct link to Sertifikathåndtering" title="Direct link to Sertifikathåndtering">​</a></h2>
<p>Webtjeneren på verktøykassen er bare tilgjengelig over <em>HTTPS</em>. Dette
krever et tjenersertifikat. Vi bruker i dag <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let&#x27;s
Encrypt</a> til å automatisk utstede sertifikater
til webtjeneren.</p>
<p>Let&#x27;s Encrypt krever i utgangspunktet at webtjeneren er tilgjengelig fra
sine IP-adressser for å kunne utfordre den til å bevise sin identitet.
Disse IP-adressene offentliggjøres ikke, og Let&#x27;s Encrypt forbeholder
seg retten til å endre disse når som helst, uten forvarsel. Webtjeneren
på verktøykassen holder de nødvendige URLene åpne for verden, men kan
ellers begrense aksess til et valgfritt sett med IP-adresser. Henvend
deg til vårt kontaktpunkt dersom du ønsker endringer i restriksjonene.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="netflownfsen">Netflow/NfSen<a href="#netflownfsen" class="hash-link" aria-label="Direct link to Netflow/NfSen" title="Direct link to Netflow/NfSen">​</a></h2>
<p>Verktøykassene bruker <a href="http://nfsen.sourceforge.net/" target="_blank" rel="noopener noreferrer">NfSen</a> for å
prosessere netflowdata som blir eksportert fra rutere. NfSen er et
web-basert grensesnitt til <a href="http://nfdump.sourceforge.net/" target="_blank" rel="noopener noreferrer">nfdump netflow
tools</a>.</p>
<p>Dette grensesnittet er tilgjengelig via NAV sin toolbox.</p>
<p>Nfsen ser ut til å være litt kilen mhp. på å definere nye
netflow-eksportører (&#x27;sources&#x27;) etter at systemet er startet , så det er
lurt å ha alle disse klart på forhånd, og legge alle inn før systemet
startes opp.</p>
<p>Kildene defineres under <code>sources</code> i
<code>/etc/nfsen/nfsen.conf.local</code>. Denne filen konfigureres
av Puppet; eventuelle endringsønsker må meldes til Sikt.</p>
<p>Mere inngående detaljer angående bruk av nfsen står på
<a href="http://nfsen.sourceforge.net/" target="_blank" rel="noopener noreferrer">nfsen</a> sine hjemmesider.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generelt-om-netflow">Generelt om Netflow<a href="#generelt-om-netflow" class="hash-link" aria-label="Direct link to Generelt om Netflow" title="Direct link to Generelt om Netflow">​</a></h3>
<ul>
<li>En flow er definert som et sett av IP pakker som har en del felles
felt i pakkehodet.</li>
<li>De felt som brukes for å identifisere flows er:<!-- -->
<ul>
<li>Source IP adress</li>
<li>Destination IP adress</li>
<li>Source port number</li>
<li>Destination port number</li>
<li>Protocol type</li>
<li>Type of service</li>
<li>Input interface</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafene">Grafene<a href="#grafene" class="hash-link" aria-label="Direct link to Grafene" title="Direct link to Grafene">​</a></h3>
<ul>
<li>Grafene vil vise trafikk-mønsteret til kildene man eksporterer
netflow-data ifra. Default er det satt opp slik at grafene er
&quot;stacked&quot;. Dvs. at dersom man eksporterer ifra flere kilder (har
flere farger på grafene), legges den ene grafen på toppen av den
andre. Dette kan man endre ved å trykke på <em>line graph</em> på
<em>details</em>-fanen. Her kan man også endre til logaritmisk skala.</li>
<li>Under <em>Graphs</em>-fanen kan man se større grafer for henholdsvis <em>Flows</em>,
<em>Packets</em> eller <em>Traffic</em>.</li>
<li>Under <em>Details</em>-fanen kan man se detaljer for enten <em>Flows</em>, <em>Packets</em>
eller <em>Traffic</em>. Man kan velge en av de andre i de små thumbnailene på
høyresiden.</li>
<li>Dersom man vil ekskludere en kilde ifra grafene, kan man trykke på
krysset under <code>source</code> for hver kilde.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hvordan-grave-i-detaljene">Hvordan grave i detaljene<a href="#hvordan-grave-i-detaljene" class="hash-link" aria-label="Direct link to Hvordan grave i detaljene" title="Direct link to Hvordan grave i detaljene">​</a></h3>
<ul>
<li>Angi tidsperiode</li>
<li>Dette gjør du enten ved å la den stå på <code>Single Timeslot</code> (5 min) under grafen, eller du velger en lengre
tidsperiode med å velge <code>Time Window</code> under
grafen og drar på pila som er nederst på grafen. Tidspunktet blir
avmerket med grønn farge i grafen</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-flows-vs-stat-topn">List Flows vs. Stat TopN<a href="#list-flows-vs-stat-topn" class="hash-link" aria-label="Direct link to List Flows vs. Stat TopN" title="Direct link to List Flows vs. Stat TopN">​</a></h3>
<ul>
<li><code>List Flows</code> viser hele flows, og gjør ingen
sortering basert på statistikk. Her vil det kun vises de antall
flows man har valgt som først stemmer med det utvalget man har
valgt. Man kan også aggregere data basert på de valgene man gjør.</li>
<li><code>Stat TopN</code> viser statistisk analyse og
sorterer output basert på valgene du gjør.</li>
<li><code>Stat Any IP Address order by bytes</code> vil
f.eks gi deg en liste over de som har overført mest data i valgt
tidsperiode.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="søk-i-netflow-dataene">Søk i netflow dataene<a href="#søk-i-netflow-dataene" class="hash-link" aria-label="Direct link to Søk i netflow dataene" title="Direct link to Søk i netflow dataene">​</a></h3>
<ul>
<li>tcpdump-aktig filter format</li>
<li>Eks.:<!-- -->
<ul>
<li><code>host 158.38.x.y</code> (Filtrerer ut all trafikk til/fra host
158.38.x.y)</li>
<li><code>src host 158.38.w.x and dst host 158.38.y.z</code> (Filtrerer ut all
trafikk mellom disse to hostene der trafikken kommer fra
158.38.w.x og sendes til 158.38.y.z, src=source,
dst=destination)</li>
<li><code>proto tcp and src host 158.38.x.y</code> (Filtrerer ut all tcp trafikk
sendt ifra 158.38.x.y)</li>
<li><code>src host 158.38.w.x or host 158.38.y.z</code> (Filtrerer ut trafikk fra
host 158.38.x.y eller all trafikk til/fra host 158.38.y.z)</li>
<li><code>src host 158.38.x.y and src port 22</code> (Filtrerer ut all trafikk
fra host 158.38.x.y der trafikken er sendt ifra port 22(ssh))</li>
<li><code>src port gt 80 and src port lt 123</code> (Filtrerer ut trafikk sendt
ifra portene mellom 80 og 123, gt= greater than, lt=less than)</li>
<li><code>src port 80 and not host 158.38.x.y</code> (Filtrerer ut trafikk sendt
ifra port 80 og som ikke er sendt til/fra host 158.38.x.y)</li>
<li><code>src net 158.38.x.0/24</code> (Filtrerer ut trafikk sendt ifra nettet
158.38.x.0/24)</li>
<li>Ett annet triks er å angi hvilke interface man skal plukke ut
trafikk ifra. Eks. <code>in if 24</code>, vil kun plukke ut trafikk som
kommer inn på interface 24. Hvilket nummer et interface har på
et cisco-ruter finner man ut med kommandoen <code>show snmp mib ifmib ifindex</code>. (Husk at netflow kun eksporteres fra trafikk inn på et
interface. Trafikk ut på et interface vil ikke bli eksportert,
og må følgelig filtreres ut fra det interfacet hvor denne
trafikken kommer inn.) Skriver man derfor <code>out if 24</code> vil dette da
bety det samme som, gi meg all trafikk <strong>inn</strong> på alle interface
bortsett fra 24.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ferdigdefinerte-filter-man-bruker-ofte">Ferdigdefinerte filter man bruker ofte<a href="#ferdigdefinerte-filter-man-bruker-ofte" class="hash-link" aria-label="Direct link to Ferdigdefinerte filter man bruker ofte" title="Direct link to Ferdigdefinerte filter man bruker ofte">​</a></h3>
<ul>
<li>Disse kan lagres som filer i filsystemet under katalogen
<code>/var/lib/nfsen/filters</code></li>
<li>Vanlig filtersyntaks brukes i disse filene også.</li>
<li>Ferdigdefinerte filtre velges under boksen man skriver inn filtre
der det vanligvis står and none</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lage-profiler">Lage profiler<a href="#lage-profiler" class="hash-link" aria-label="Direct link to Lage profiler" title="Direct link to Lage profiler">​</a></h3>
<p>For søk man gjør ofte og som man vil følge med grafisk over tid kan det
være lurt å lage egne profiler som har oversikt over denne trafikken.
Dersom man velger Real Profile lager dette egne flow-filer på
filsystemet (som også tar plass). Dersom du lager en profil som er langt
tilbake i tid, så kan det ta lang tid for nfsen å lage grunnlagsdata for
hele perioden. Dersom du lager en Shadow Profile, lager den ikke egne
flow-filer på filsystemet, men den bruker bare datagrunnlaget som
allerede ligger der. Du vil likevel få tegnet egne grafiske profiler for
dataene du vil filtrere ut. Bruk av channels gjør at du kan skreddersy
grafene og fargene etter dine behov. Se <a href="http://nfsen.sourceforge.net/" target="_blank" rel="noopener noreferrer">dokumentasjon på
sourceforge</a> for detaljer.</p>
<ul>
<li>Profile står øverst i høyre hjørne.</li>
<li>Normalt vises Profile &quot;live&quot;</li>
<li>Velg New profile<!-- -->
<ul>
<li>lag en profil som plukker ut all trafikk av en gitt type, basert
på filtre du definerer.</li>
<li>Navngi denne rapporten.</li>
<li>Velg en kilde</li>
<li>Basert på hvor mye data som skal prosesseres tar det en hvis tid
å prosessere og lage denne profilen</li>
<li>Vis profilen etterpå ved å velge denne fra selected profile</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alert">Alert<a href="#alert" class="hash-link" aria-label="Direct link to Alert" title="Direct link to Alert">​</a></h3>
<ul>
<li>I nyeste utgave av nfsen kan man lage terskelbaserte alarmer.</li>
<li>Dokumentasjonen på <a href="http://nfsen.sourceforge.net/#mozTocId859236" target="_blank" rel="noopener noreferrer">nfsen sine
sider</a> sier viser
detaljer for hvordan man oppretter alarmer. OBS: Husk å sette/endre
filteret for alarmen dersom du ønsker å teste dette. Default står
den på &#x27;not any&#x27; som ikke vil gi deg noe trafikk!</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feilsøking-av-nfsen">Feilsøking av nfsen<a href="#feilsøking-av-nfsen" class="hash-link" aria-label="Direct link to Feilsøking av nfsen" title="Direct link to Feilsøking av nfsen">​</a></h3>
<p>Dersom du har problemer med nfsen er det ett par ting man kan sjekke
foer man melder feil.</p>
<ul>
<li>Går alle nødvendige prosesser?
1 nfsend og 1 nfcapd per kilde(netflow-eksportør) Dersom ikke
restart nfsen.</li>
<li>Mottar du flows fra kilde?
Bruk gjerne tcpdump for å sjekke om du mottar flows. F.eks <code>tcpdump port 2055</code>. Hvilken port du lytter på kan du finne i
<code>/etc/nfsen/nfsen.conf.local</code> under sources. Dersom ikke, sjekk
ruterconfig og access-lister.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-tools">Command line tools<a href="#command-line-tools" class="hash-link" aria-label="Direct link to Command line tools" title="Direct link to Command line tools">​</a></h2>
<p>En del kjekke command line tools er installert på verktøykassene. Her
følger en liste og kort omtale:</p>
<ul>
<li>
<p><code>ping</code> og <code>traceroute</code> (trenger vel ingen kommentar)</p>
</li>
<li>
<p><code>snmpwalk</code> (m.fl.)
Brukes til å polle utstyr med snmp, kjekt for NAV feilsøking.</p>
<p>Typisk syntaks:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">snmpwalk -v2c -c &lt;community&gt; &lt;ip&gt; &lt;oid&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Eks:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">snmpwalk -v2c -c public 10.10.10.1 ifinoctet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(henter inoctet tellere fra boks 10.10.10.1)</p>
</li>
<li>
<p><code>nmap</code>
Brukes til scanne en host/sjekke om en port/sett av porter er åpne.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hobbitxymon">Hobbit/Xymon<a href="#hobbitxymon" class="hash-link" aria-label="Direct link to Hobbit/Xymon" title="Direct link to Hobbit/Xymon">​</a></h2>
<p>Se egen side for <a href="/docs/nettadministrasjon/xymon">dokumentasjon av Xymon-integrasjonen på verktøykassen</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-builder-fwbuilder">Firewall Builder (fwbuilder)<a href="#firewall-builder-fwbuilder" class="hash-link" aria-label="Direct link to Firewall Builder (fwbuilder)" title="Direct link to Firewall Builder (fwbuilder)">​</a></h2>
<p><a href="/docs/nettadministrasjon/fwbuilder">Brukerdokumentasjon for Firewall Builder foreligger på en egen
side</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/sikt-no/docs/tree/master/docs/nettadministrasjon/brukerdok.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-26T00:00:00.000Z">Sep 26, 2023</time></b> by <b>morten.brekkevold@sikt.no</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/nettadministrasjon/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Nettadministrasjon - Verktøykasse</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/nettadministrasjon/xymon"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Xymon-integrasjon på verktøykasser</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#innledning" class="table-of-contents__link toc-highlight">Innledning</a></li><li><a href="#vedlikeholdsvindu" class="table-of-contents__link toc-highlight">Vedlikeholdsvindu</a></li><li><a href="#sikkerhetsdirektiv-for-verktøykassene" class="table-of-contents__link toc-highlight">Sikkerhetsdirektiv for verktøykassene</a><ul><li><a href="#kontaktpunkt" class="table-of-contents__link toc-highlight">Kontaktpunkt</a></li></ul></li><li><a href="#brukertilgang-til-verktøykassen" class="table-of-contents__link toc-highlight">Brukertilgang til verktøykassen</a></li><li><a href="#tftp" class="table-of-contents__link toc-highlight">tftp</a></li><li><a href="#ftp" class="table-of-contents__link toc-highlight">FTP</a><ul><li><a href="#oppsettet-av-ftp-tjeneren" class="table-of-contents__link toc-highlight">Oppsettet av FTP-tjeneren</a></li></ul></li><li><a href="#radius" class="table-of-contents__link toc-highlight">Radius</a></li><li><a href="#syslog" class="table-of-contents__link toc-highlight">Syslog</a></li><li><a href="#nav" class="table-of-contents__link toc-highlight">NAV</a><ul><li><a href="#web-brukeradministrasjon" class="table-of-contents__link toc-highlight">Web brukeradministrasjon</a></li><li><a href="#sett-velkomstmelding-mm" class="table-of-contents__link toc-highlight">Sett velkomstmelding m.m.</a></li><li><a href="#sett-mottaker-av-nav-adminstrativ-epost" class="table-of-contents__link toc-highlight">Sett mottaker av NAV-adminstrativ epost</a></li><li><a href="#sett-passord-til-navs-postgresql-database" class="table-of-contents__link toc-highlight">Sett passord til NAVs PostgreSQL-database</a></li><li><a href="#seede-databasen" class="table-of-contents__link toc-highlight">&quot;Seede&quot; databasen:</a></li><li><a href="#varslingssystemet-alert-profiles" class="table-of-contents__link toc-highlight">Varslingssystemet Alert Profiles</a></li><li><a href="#sjekk-status-på-bakgrunnsprosesser-og-logger" class="table-of-contents__link toc-highlight">Sjekk status på bakgrunnsprosesser og logger</a></li><li><a href="#feilsøking-av-mobiltelefonsms-utsending" class="table-of-contents__link toc-highlight">Feilsøking av mobiltelefon/SMS-utsending</a></li><li><a href="#sette-opp-navverktøykassen-for-radius-accounting-logging" class="table-of-contents__link toc-highlight">Sette opp NAV/verktøykassen for Radius Accounting-logging</a></li><li><a href="#integrasjon-med-argus" class="table-of-contents__link toc-highlight">Integrasjon med Argus</a></li></ul></li><li><a href="#sertifikathåndtering" class="table-of-contents__link toc-highlight">Sertifikathåndtering</a></li><li><a href="#netflownfsen" class="table-of-contents__link toc-highlight">Netflow/NfSen</a><ul><li><a href="#generelt-om-netflow" class="table-of-contents__link toc-highlight">Generelt om Netflow</a></li><li><a href="#grafene" class="table-of-contents__link toc-highlight">Grafene</a></li><li><a href="#hvordan-grave-i-detaljene" class="table-of-contents__link toc-highlight">Hvordan grave i detaljene</a></li><li><a href="#list-flows-vs-stat-topn" class="table-of-contents__link toc-highlight">List Flows vs. Stat TopN</a></li><li><a href="#søk-i-netflow-dataene" class="table-of-contents__link toc-highlight">Søk i netflow dataene</a></li><li><a href="#ferdigdefinerte-filter-man-bruker-ofte" class="table-of-contents__link toc-highlight">Ferdigdefinerte filter man bruker ofte</a></li><li><a href="#lage-profiler" class="table-of-contents__link toc-highlight">Lage profiler</a></li><li><a href="#alert" class="table-of-contents__link toc-highlight">Alert</a></li><li><a href="#feilsøking-av-nfsen" class="table-of-contents__link toc-highlight">Feilsøking av nfsen</a></li></ul></li><li><a href="#command-line-tools" class="table-of-contents__link toc-highlight">Command line tools</a></li><li><a href="#hobbitxymon" class="table-of-contents__link toc-highlight">Hobbit/Xymon</a></li><li><a href="#firewall-builder-fwbuilder" class="table-of-contents__link toc-highlight">Firewall Builder (fwbuilder)</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Sikt Docs</div><ul class="footer__items clean-list"><li class="footer__item"><p>Teknisk dokumentasjon på fellesløsningene Sikt leverer for utdanning og forskning.</p></li></ul></div><div class="col footer__col"><div class="footer__title">Hvordan bidra?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-directly-from-the-web-browser" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet fra nettleseren</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-locally" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet lokalt</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Opprette en issue i GitHub</a></li></ul></div><div class="col footer__col"><div class="footer__title">Kontaktinformasjon</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sikt.no/kontakt-oss" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kontakt oss</a></li><li class="footer__item"><a href="https://sikt.no/om-sikt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Om Sikt</a></li><li class="footer__item"><a href="https://sikt.no/personvernerklaering" target="_blank" rel="noopener noreferrer" class="footer__link-item">Personvernerklæring</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="104" height="28"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="104" height="28"></div><div class="footer__copyright">Copyright © 2024 Sikt – Kunnskapssektorens tjenesteleverandør</div></div></div></footer></div>
</body>
</html>