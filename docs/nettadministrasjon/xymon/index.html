<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-nettadministrasjon/xymon" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Xymon-integrasjon på verktøykasser | Sikt teknisk dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.sikt.no/docs/nettadministrasjon/xymon"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Xymon-integrasjon på verktøykasser | Sikt teknisk dokumentasjon"><meta data-rh="true" name="description" content="Innledning"><meta data-rh="true" property="og:description" content="Innledning"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.sikt.no/docs/nettadministrasjon/xymon"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/nettadministrasjon/xymon" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sikt.no/docs/nettadministrasjon/xymon" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Xymon-integrasjon på verktøykasser","item":"https://docs.sikt.no/docs/nettadministrasjon/xymon"}]}</script><link rel="stylesheet" href="/assets/css/styles.fe75318c.css">
<script src="/assets/js/runtime~main.33ebc714.js" defer="defer"></script>
<script src="/assets/js/main.e3be2979.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/sikt_logo.svg"><link rel="preload" as="image" href="/img/sikt_logo_white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sikt_logo.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/sikt_logo_white.svg" alt="Sikt logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">teknisk dokumentasjon</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/"><span title="Nettadministrasjon - Verktøykasse" class="linkLabel_WmDU">Nettadministrasjon - Verktøykasse</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/brukerdok"><span title="Brukerdokumentasjon Verktøykasser" class="linkLabel_WmDU">Brukerdokumentasjon Verktøykasser</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/nettadministrasjon/xymon"><span title="Xymon-integrasjon på verktøykasser" class="linkLabel_WmDU">Xymon-integrasjon på verktøykasser</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nettadministrasjon/fwbuilder"><span title="Firewall builder" class="linkLabel_WmDU">Firewall builder</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Xymon-integrasjon på verktøykasser</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Xymon-integrasjon på verktøykasser</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="innledning">Innledning<a href="#innledning" class="hash-link" aria-label="Direct link to Innledning" title="Direct link to Innledning" translate="no">​</a></h2>
<p>Xymon (tidl. <em>Hobbit</em>) er et tjenesteovervåkningsverktøy som kjører på
verktøykassen, og som er integrert med NAV-installasjonen der. Det er
kun utstyr som legges inn i kategorien <code>SRV</code> i NAV som blir automatisk
overvåket av Xymon. For mer informasjon om Xymon, se <a href="https://xymon.sourceforge.io/" target="_blank" rel="noopener noreferrer" class="">Xymons
hjemmesider.</a></p>
<p>Da Hobbit ble omdøpt til Xymon, var det en del begrepsbruk og
konfigurasjonsfiler som også endret seg. Dersom du er vant med de gamle
filene og begrepene, kan du lese
<a href="https://xymon.com/help/upgrade-to-430.txt" target="_blank" rel="noopener noreferrer" class="">Xymons</a>
oppgraderingsnotater.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tjenester">Tjenester<a href="#tjenester" class="hash-link" aria-label="Direct link to Tjenester" title="Direct link to Tjenester" translate="no">​</a></h2>
<p>Det er Xymon og Apache som må kjøre for at tjenesten skal virke.</p>
<p><strong>xymon</strong></p>
<ul>
<li class="">Daemon:</li>
<li class="">Start/stop: <code>/etc/init.d/xymon {start/stop/restart}</code></li>
<li class="">Configfiler: <code>/etc/xymon/</code></li>
</ul>
<p><strong>apache2</strong></p>
<ul>
<li class="">Daemon: <code>/usr/sbin/apache2</code></li>
<li class="">Start/stopp: <code>/etc/init.d/apache2 {start/stop/restart/reload}</code></li>
<li class="">config: <code>/etc/apache2/sites-enabled/25-nav-secure.conf</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="brukerdokumentasjon">Brukerdokumentasjon<a href="#brukerdokumentasjon" class="hash-link" aria-label="Direct link to Brukerdokumentasjon" title="Direct link to Brukerdokumentasjon" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="maskiner-som-overvåkes-med-xymon">Maskiner som overvåkes med Xymon<a href="#maskiner-som-overvåkes-med-xymon" class="hash-link" aria-label="Direct link to Maskiner som overvåkes med Xymon" title="Direct link to Maskiner som overvåkes med Xymon" translate="no">​</a></h3>
<p>Hvert kvarter kjører et script på verktøykassen som konfigurerer Xymon
til å overvåke alle maskiner fra <code>SRV</code>-kategorien i NAV. Dette gjør at
det er bare ett sted for å vedlikeholde listen over servere som skal
overvåkes i NAV og Xymon. Når en maskin registreres i NAV, kan den
legges inn i opptil flere grupper (<em>device groups</em>). Disse gruppene blir
også brukt som grupper i Xymon.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="overvåking-av-grupper">Overvåking av grupper<a href="#overvåking-av-grupper" class="hash-link" aria-label="Direct link to Overvåking av grupper" title="Direct link to Overvåking av grupper" translate="no">​</a></h3>
<p>Man kan sette opp overvåking av bestemte services for hver enkelt
gruppe. Man kan f.eks overvåke SMTP for alle servere som ligger i
mail-gruppa. Dette gjøres ved å logge på verktøykassen med ssh. Man
redigerer filen <code>/etc/nav/navsrv2hobbit.conf</code>. Her er et eksempel på
hvordan man kan gjøre det:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ALL]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services = ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[MAIL]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services = smtp</span><br></span></code></pre></div></div>
<p>Her ser vi at ssh overvåkes for samtlige maskiner, mens SMTP overvåkes
bare for den gruppen av maskiner som befinner seg i gruppen MAIL i NAV.
SSH ligger som standardovervåking for samtlige maskiner.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="overvåking-av-maskiner">Overvåking av maskiner<a href="#overvåking-av-maskiner" class="hash-link" aria-label="Direct link to Overvåking av maskiner" title="Direct link to Overvåking av maskiner" translate="no">​</a></h3>
<p>Man kan sette opp bestemte overvåkinger for hver enkelt maskin, ved å
legge til sine egne konfigurasjonsfiler på verktøykassen, under
<code>/etc/xymon/analysis.d/</code>. Verktøykassen overvåker seg selv med Xymon på
denne måten, og konfigurasjonen som brukes her kan ses i filen <code>vk.cfg</code>.</p>
<p>Et eksempel på en slik konfigurasjonsfil kan se slik ut:</p>
<p>HOST=testserver.uninett.no
PROC        cfenvd 1 1 yellow
PROC        cfservd 1 1 red
PROC        munin-node 1 -1 red
PROC        sshd
PROC        ntpd 1 1 yellow
DISK        /home 95 98
DISK        /var/log 95 98</p>
<p>Her ser vi hvilke bestemte prosesser som er satt opp til overvåking med
at det står <code>PROC</code> foran prosessnavnet. Bak hver prosess kan man ha et
tall som angir hvor mange prosesser som kan kjøres. På prosessen
<code>cfenvd</code> står det først tallet <code>1</code>, som betyr at det minimum må være én
prosess (<em>mincount</em>) ved det navnet og bak tallet står det <code>1</code>
(<em>maxcount</em>). Dette betyr at det kan kun være én (og bare én) prosess av
<code>cfenvd</code>. Hvis ikke dette er oppfylt vil den blir markert som gul i
Xymon, i motsetning til <code>cfservd</code>, der det vil bli markert som rødt. Man
kan på denne måten angi hvor mange prosesser som skal kjøre. I tillegg
kan man bruke verdien <code>-1</code>, som betyr at det kan være uendelig mange
prosesser som kjøres.</p>
<p>I tillegg kan man sette opp overvåking av disk-partisjoner. Hvis <code>/home</code>
(som i eks. over) fylles opp til 95% vil den bli gul, mens kommer den på
98% vil den flagges rød i Xymon.</p>
<p>Som standard på samtlige servere står det følgende regler
(<code>/etc/xymon/analysis.cfg</code>):</p>
<p>DEFAULT
UP      1h
LOAD    5.0 10.0
DISK    * 90 95
MEMPHYS 100 101
MEMSWAP 50 80
MEMACT  90 97</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installere-xymon-client-på-klienten">Installere xymon-client på klienten<a href="#installere-xymon-client-på-klienten" class="hash-link" aria-label="Direct link to Installere xymon-client på klienten" title="Direct link to Installere xymon-client på klienten" translate="no">​</a></h3>
<ul>
<li class="">Programmet <strong>xymon-client</strong> må installeres på klienten som skal
overvåkes.</li>
<li class="">IP-adressen til verktøykassen må settes i
<code>/etc/default/xymon-client</code>, slik at xymon-client vet hvor den skal
rapportere.</li>
<li class="">For Windows-maskiner som skal overvåkes må
<em><a href="http://bbwin.sourceforge.net/" target="_blank" rel="noopener noreferrer" class="">BBWin</a></em> installeres på klienten.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="varsling">Varsling<a href="#varsling" class="hash-link" aria-label="Direct link to Varsling" title="Direct link to Varsling" translate="no">​</a></h3>
<p>Varsling fra Xymon er integrert med NAVs hendelses- og alarmsystem, og
styres gjennom din personlige alarmprofil i NAV. Her viser vi til
<a href="https://nav.readthedocs.io/" target="_blank" rel="noopener noreferrer" title="Gå til NAVs
dokumentasjon" class="">dokumentasjon om NAV</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="kontaktadresser">Kontaktadresser<a href="#kontaktadresser" class="hash-link" aria-label="Direct link to Kontaktadresser" title="Direct link to Kontaktadresser" translate="no">​</a></h2>
<ul>
<li class=""><a href="mailto:kontakt@sikt.no" target="_blank" rel="noopener noreferrer" class="">kontakt@sikt.no</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/sikt-no/docs/tree/master/docs/nettadministrasjon/xymon.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-08-26T00:00:00.000Z" itemprop="dateModified">Aug 26, 2021</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/nettadministrasjon/brukerdok"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Brukerdokumentasjon Verktøykasser</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/nettadministrasjon/fwbuilder"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Firewall builder</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#innledning" class="table-of-contents__link toc-highlight">Innledning</a></li><li><a href="#tjenester" class="table-of-contents__link toc-highlight">Tjenester</a></li><li><a href="#brukerdokumentasjon" class="table-of-contents__link toc-highlight">Brukerdokumentasjon</a><ul><li><a href="#maskiner-som-overvåkes-med-xymon" class="table-of-contents__link toc-highlight">Maskiner som overvåkes med Xymon</a></li><li><a href="#overvåking-av-grupper" class="table-of-contents__link toc-highlight">Overvåking av grupper</a></li><li><a href="#overvåking-av-maskiner" class="table-of-contents__link toc-highlight">Overvåking av maskiner</a></li><li><a href="#installere-xymon-client-på-klienten" class="table-of-contents__link toc-highlight">Installere xymon-client på klienten</a></li><li><a href="#varsling" class="table-of-contents__link toc-highlight">Varsling</a></li></ul></li><li><a href="#kontaktadresser" class="table-of-contents__link toc-highlight">Kontaktadresser</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sikt Docs</div><ul class="footer__items clean-list"><li class="footer__item"><p>Teknisk dokumentasjon på fellesløsningene Sikt leverer for utdanning og forskning.</p></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hvordan bidra?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-directly-from-the-web-browser" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet fra nettleseren</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs#editing-the-site-locally" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endre innholdet lokalt</a></li><li class="footer__item"><a href="https://github.com/sikt-no/docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Opprette en issue i GitHub</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Kontaktinformasjon</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sikt.no/kontakt-oss" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kontakt oss</a></li><li class="footer__item"><a href="https://sikt.no/om-sikt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Om Sikt</a></li><li class="footer__item"><a href="https://sikt.no/personvernerklaering" target="_blank" rel="noopener noreferrer" class="footer__link-item">Personvernerklæring</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="104" height="28"><img src="/img/sikt_logo_white.svg" alt="Sikt Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="104" height="28"></div><div class="footer__copyright">Copyright © 2025 Sikt – Kunnskapssektorens tjenesteleverandør</div></div></div></footer></div>
</body>
</html>