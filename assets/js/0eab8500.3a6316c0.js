"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[2480],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),c=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(o.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(r),d=a,m=u["".concat(o,".").concat(d)]||u[d]||g[d]||i;return r?n.createElement(m,l(l({ref:t},p),{},{components:r})):n.createElement(m,l({ref:t},p))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<i;c++)l[c]=r[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6200:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const i={description:"Hvordan du kan cache responser i Gravitee for \xe5 redusere belastningen mot API-et ditt.",title:"Caching i gravitee"},l="Caching i gravitee",s={unversionedId:"datadeling/veiledere/api-manager/caching-gravitee",id:"datadeling/veiledere/api-manager/caching-gravitee",title:"Caching i gravitee",description:"Hvordan du kan cache responser i Gravitee for \xe5 redusere belastningen mot API-et ditt.",source:"@site/docs/datadeling/veiledere/api-manager/caching-gravitee.md",sourceDirName:"datadeling/veiledere/api-manager",slug:"/datadeling/veiledere/api-manager/caching-gravitee",permalink:"/docs/datadeling/veiledere/api-manager/caching-gravitee",draft:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/datadeling/veiledere/api-manager/caching-gravitee.md",tags:[],version:"current",lastUpdatedAt:1678104585,formattedLastUpdatedAt:"Mar 6, 2023",frontMatter:{description:"Hvordan du kan cache responser i Gravitee for \xe5 redusere belastningen mot API-et ditt.",title:"Caching i gravitee"},sidebar:"datadeling",previous:{title:"Konfigurere backend",permalink:"/docs/datadeling/veiledere/api-manager/backend"},next:{title:"Filtrere bort innhold i responsen fra et API",permalink:"/docs/datadeling/veiledere/api-manager/filtrere-innhold-json"}},o={},c=[{value:"Opprette en cache-ressurs",id:"opprette-en-cache-ressurs",level:3},{value:"Opprette en cache policy",id:"opprette-en-cache-policy",level:3},{value:"Expression Language-uttrykk",id:"expression-language-uttrykk",level:3}],p={toc:c};function g(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"caching-i-gravitee"},"Caching i gravitee"),(0,a.kt)("p",null,"Hvordan du kan cache responser i Gravitee for \xe5 redusere belastningen mot API-et ditt."),(0,a.kt)("p",null,"For \xe5 sette p\xe5 caching m\xe5 man opprette en eller flere cache-ressuser, og deretter legge p\xe5 en policy som benytter denne."),(0,a.kt)("h3",{id:"opprette-en-cache-ressurs"},"Opprette en cache-ressurs"),(0,a.kt)("p",null,(0,a.kt)("a",{target:"_blank",href:r(3244).Z},(0,a.kt)("img",{alt:"Designmeny",src:r(8536).Z,width:"1085",height:"463"}))),(0,a.kt)("p",null,'Naviger til API-et hvor du skal konfigurere en cache. Velg Design i den venstre sidemenyen under API-ets navn, og deretter Resources under "GENERAL". Trykk p\xe5 sirkelen med et pluss-tegn for \xe5 opprette en ny ressurs. Fyll inn navn og vel Cache som Type.'),(0,a.kt)("p",null,'Du m\xe5 skrive inn navn to steder. Det f\xf8rste feltet, "Name", er slik cachen vil v\xe6re synlig n\xe5r man ser p\xe5 tilgjengelige ressurser. Det andre feltet, "cache name", er navnet som brukes p\xe5 den tilh\xf8rende policyen. Bruk gjerne samme navn begge steder.'),(0,a.kt)("p",null,"Configuration:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Cache name: navn p\xe5 tilh\xf8rende policy"),(0,a.kt)("li",{parentName:"ul"},"Time to idle: hvor lenge et svar bli cachet uten at det blir spurt p\xe5"),(0,a.kt)("li",{parentName:"ul"},"Time to live: hvor lenge et svar blir cachet uavhengig av om det blir spurt p\xe5 eller ikke"),(0,a.kt)("li",{parentName:"ul"},"Max entries on heap: hvor mange svar som kan bli lagret i denne cachen")),(0,a.kt)("p",null,(0,a.kt)("a",{target:"_blank",href:r(4357).Z},(0,a.kt)("img",{alt:"Cache-ressurs",src:r(9762).Z,width:"701",height:"1048"}))),(0,a.kt)("h3",{id:"opprette-en-cache-policy"},"Opprette en cache policy"),(0,a.kt)("p",null,'G\xe5 til Design, trykk deretter p\xe5 Policies under "GENERAL". Dra \xf8nsket cache-policy fra tilgjengelige policies over til riktig path. Fyll inn informasjon for \xe5 fullf\xf8re konfigurasjonen.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Cache name: navn nr. 2 om du brukte forskjellige navn p\xe5 ressursen og cachen i opprettelsen av cachen i forrige steg."),(0,a.kt)("li",{parentName:"ul"},"Key: dette er det viktigste valget, se konfigurasjon lenger ned. Som oftest er dette ett eller flere parameter."),(0,a.kt)("li",{parentName:"ul"},"Time to live: kan settes lavere enn det som ble valgt for cache-ressursen i forrige steg"),(0,a.kt)("li",{parentName:"ul"},"Scope: velg mellom API eller Application")),(0,a.kt)("p",null,'Cachen lagres som en key-value-store , dvs. \xe9n n\xf8kkel gir ett svar. Key kan f.eks. v\xe6re et parameter. For \xe5 bruke parameteren "status" skriv:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Text"},"{#request.params['status']}\n")),(0,a.kt)("p",null,'Da vil svaret bli cachen med en n\xf8kkel lik verdien i parameteret, f.eks. "sold", "available" eller en tom streng. Merk at om det er flere parameter som er mulig \xe5 bruke kan det bli tull. Det kan unng\xe5s ved \xe5 bruke en kombinasjon av parametre, f.eks. ved \xe5 bruke en kombinasjon av de to parameterene "status" og "tags" slik:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Text"},"{#request.params['status']}-{#request.params['tags']}\n")),(0,a.kt)("h3",{id:"expression-language-uttrykk"},"Expression Language-uttrykk"),(0,a.kt)("p",null,"{#request.params","['status']","} er et eksempel p\xe5 et Expression Language-uttrykk. De er basert p\xe5 Spring Exression Language (SpEL), og blir brukt som variabler i API Manager.\nFor \xe5 lese mer om dette, se ",(0,a.kt)("a",{parentName:"p",href:"https://xn--offisiell%20dokumentasjon%20fra%20leverandren-6se./"},"offisiell dokumentasjon fra leverand\xf8ren.")))}g.isMDXComponent=!0},3244:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/image-20201021141543-1-c341c394b610b959e04ea79db1920a4f.png"},4357:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/image-20201021145429-2-e80c7404c86e3661714c7f1f9d12387c.png"},8536:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20201021141543-1-c341c394b610b959e04ea79db1920a4f.png"},9762:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20201021145429-2-e80c7404c86e3661714c7f1f9d12387c.png"}}]);