"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[7811],{3905:(e,n,t)=>{t.d(n,{Zo:()=>k,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),d=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},k=function(e){var n=d(e.components);return r.createElement(o.Provider,{value:n},e.children)},g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,k=l(e,["components","mdxType","originalType","parentName"]),p=d(t),m=a,u=p["".concat(o,".").concat(m)]||p[m]||g[m]||s;return t?r.createElement(u,i(i({ref:n},k),{},{components:t})):r.createElement(u,i({ref:n},k))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,i=new Array(s);i[0]=p;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<s;d++)i[d]=t[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},1981:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>g,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var r=t(7462),a=(t(7294),t(3905));const s={slug:"/datadeling/god-praksis/api-design/",title:"API-design"},i=void 0,l={unversionedId:"datadeling/god-praksis/api-design",id:"datadeling/god-praksis/api-design",title:"API-design",description:"Anbefalinger rundt utforming av API. B\xe5de for deg som utvikler en tjeneste som",source:"@site/docs/datadeling/god-praksis/api-design.md",sourceDirName:"datadeling/god-praksis",slug:"/datadeling/god-praksis/api-design/",permalink:"/docs/datadeling/god-praksis/api-design/",draft:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/datadeling/god-praksis/api-design.md",tags:[],version:"current",lastUpdatedAt:1668592250,formattedLastUpdatedAt:"Nov 16, 2022",frontMatter:{slug:"/datadeling/god-praksis/api-design/",title:"API-design"},sidebar:"datadeling",previous:{title:"God praksis i fellestjenesten for Datadeling",permalink:"/docs/datadeling/god-praksis/"},next:{title:"Anbefalinger rundt Webservice",permalink:"/docs/datadeling/god-praksis/bruk-av-webservice"}},o={},d=[{value:"Prinsipper for godt API-design",id:"prinsipper-for-godt-api-design",level:2},{value:"Funksjonelt API",id:"funksjonelt-api",level:2},{value:"Datasett",id:"datasett",level:2},{value:"Personopplysninger",id:"personopplysninger",level:2},{value:"Anskaffelse av tjenester",id:"anskaffelse-av-tjenester",level:2},{value:"Versjonering",id:"versjonering",level:2},{value:"Sjekkliste for API",id:"sjekkliste-for-api",level:2}],k={toc:d};function g(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Anbefalinger rundt utforming av API. B\xe5de for deg som utvikler en tjeneste som\nskal dele data, og deg som skal anskaffe en tjeneste."),(0,a.kt)("p",null,"Det er ikke enkelt \xe5 lage et godt API-design. Du trenger ofte noen iterasjoner\nf\xf8r du har et API som er generelt og fungerer godt for alle konsumenter, og som\nf\xf8lger institusjonens, og sektorens, behov. For lite tid brukt p\xe5 designet kan\nf\xf8re til uheldige valg, som kan gi ulemper i lang tid fremover."),(0,a.kt)("p",null,"En vanlig fallgruve er \xe5 ikke involvere konsumentene i diskusjonen. Brukerne av\nAPI-et vil kunne gi nyttige tilbakemeldinger for \xe5 gj\xf8re API-et brukbart og\nforst\xe5elig. En annen fallgruve er \xe5 bare involvere en konsument i diskusjonen.\nDet er vanskelig \xe5 designe noe generelt nok."),(0,a.kt)("h2",{id:"prinsipper-for-godt-api-design"},"Prinsipper for godt API-design"),(0,a.kt)("p",null,"Utformingen av API b\xf8r f\xf8lge\n",(0,a.kt)("a",{parentName:"p",href:"/docs/datadeling/prinsippene"},"integrasjonsprinsippene"),", som blant annet sier\nat du b\xf8r ha et \xe5pent grensesnitt og det b\xf8r v\xe6re s\xe5 l\xf8st koblet som mulig.\nDette f\xf8lger ogs\xe5 Digitaliseringsdirektoratets f\xf8ringer, blant annet at data\nskal deles ",(0,a.kt)("em",{parentName:"p"},"som de er"),", og ikke tilpasset enkelte konsumenter."),(0,a.kt)("p",null,"Andre anbefalinger:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Brukerorientert"),": Ha i bakhodet at brukernes behov kan endre seg raskt, og\nat vi ogs\xe5 derfor b\xf8r kunne endre tjenester og funksjonalitet raskt.\nEndringsdyktighet kan fort v\xe6re viktigere enn for eksempel hvor effektiv en\nintegrasjon er.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Tjenesteorientert"),": Bruk s\xe5 l\xf8se koblinger som mulig, som vil si \xe5 gj\xf8re\ndet s\xe5 enkelt som mulig \xe5 bytte ut tjenester p\xe5 begge sider av en integrasjon.\nFor eksempel:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Bruk API-standarder, der det finnes"),(0,a.kt)("li",{parentName:"ul"},"Bruk bransjestandarder, for eksempel RESTful"),(0,a.kt)("li",{parentName:"ul"},"Hold API-et p\xe5 funksjonelt niv\xe5, og unng\xe5 systemspesifikke detaljer."),(0,a.kt)("li",{parentName:"ul"},"Bruk felles semantikk, hvis det finnes."),(0,a.kt)("li",{parentName:"ul"},"Unng\xe5 skredders\xf8m for en enkelt konsument."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Tilgjengelig"),": Lag et \xe5pent grensesnitt, som vil si at spesifikasjonen av\nditt API m\xe5 v\xe6re fritt tilgjengelig, dokumentert og leverand\xf8ruavhengig.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Oversiktlig"),": Registrer ditt API i din institusjons API-katalog, og\ndokumenter den. Du b\xf8r som minimum f\xf8lge\n",(0,a.kt)("a",{parentName:"p",href:"https://www.openapis.org/"},"OpenAPI-spesifikasjonen")," (swagger).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Etterrettelig:")," Konsumenter m\xe5 snakke med ditt API via din institusjons\nAPI gateway. Dette gj\xf8r at institusjonen f\xe5r samlet oversikt over dataflyt, og\nhar kontroll og kan for eksempel sperre tilganger ved behov. I praksis betyr\ndet at din WS b\xf8r st\xf8tte autentiseringsmekanismene som er tilgjengelig i\nfellestjenesten.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Fleksibel"),": Unntak fra prinsipper og anbefalinger er tillatt, men m\xe5\nbegrunnes. Det kan for eksempel bli vurdert \xe5 ikke v\xe6re hensiktsmessig \xe5\nutvikle et nytt API hvis en liten tjeneste har et propriet\xe6rt API som fungerer\ngreit nok. Vurderingen m\xe5 gj\xf8res med hensyn p\xe5 institusjonen og sektoren som\nhelhet, og ikke bare basert p\xe5 den enkelte tjenesten.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Effektiv"),": Konsumenter b\xf8r hente data direkte fra det institusjonen\ndefinerer som kildesystem, og ikke via andre tjenester. Unntaket er velbrukte\nkatalogtjenester. Noen datasett kan v\xe6re \xf8nskelig \xe5 kombinere for mange\nkonsumenter, som kan vere nyttig \xe5 sammenstille sentralt. Det er ogs\xe5 lite\neffektivt om en institusjon har to ulike kildesystem for omtrent samme data."))),(0,a.kt)("p",null,"Sjekkliste for valg av typen API:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Finnes det en API-standard for datasettet du skal tilby? Prioriter \xe5 bruke\ndenne! Standardisering er veldig nyttig for l\xf8se koblinger, og gj\xf8r det\nenklere \xe5 bytte systemer, p\xe5 begge sider av integrasjonen.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Bruk bransjestandarder, der det finnes. For eksempel bruk av RESTful eller\nGraphQL. Se mer om anbefaling om ",(0,a.kt)("a",{parentName:"p",href:"/docs/datadeling/god-praksis/bruk-av-webservice"},"Web\nservices"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Finnes det lignende data i andre kildesystemer? Det b\xf8r i s\xe5 fall f\xf8rst\navklares hvilken tjeneste som er kildesystem for hvilke data.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Bruk lignende semantikk som i tilsvarende datasett andre steder, hvis mulig.\nDu anbefales \xe5 gjenbruke eksisterende datasett fra\n",(0,a.kt)("a",{parentName:"p",href:"https://data.norge.no"},"data.norge.no"),". Hvis det ikke finnes, kan du med\nfordel publisere ditt eget definerte datasett der."))),(0,a.kt)("h2",{id:"funksjonelt-api"},"Funksjonelt API"),(0,a.kt)("p",null,"Hold API p\xe5 funksjonelt niv\xe5 s\xe5 langt det er mulig. Unng\xe5 for eksempel \xe5\neksponere interne systemdetaljer i API-et, for eksempel hvilke databasetabeller\ndu m\xe5 snakke med. Konsumenter \xf8nsker \xe5 fokusere p\xe5 dataene, uten \xe5 m\xe5tte ha\nkunnskap om interne detaljer i systemet ditt."),(0,a.kt)("p",null,"Se mer om funksjonelt API i ",(0,a.kt)("a",{parentName:"p",href:"/docs/datadeling/god-praksis/bruk-av-webservice"},"anbefaling om bruk av\nwebservices"),"."),(0,a.kt)("p",null,"Det er ofte vanskelig \xe5 klare \xe5 designe et API som er uavhengig av tekniske\nvalg i en tjeneste. Det kan v\xe6re en fordel med en dialog med ulike konsumenter,\nog se p\xe5 tilsvarende datamodeller eller API-et til lignende tjenester. Det kan\nv\xe6re nyttig \xe5 designe en f\xf8rste versjon av et API f\xf8r valg av tjeneste bak,\nsiden en unng\xe5r fallgruver i tekniske valg."),(0,a.kt)("p",null,"RESTful gir ofte en godt grunnlag for et funksjonelt API, men mange fallgruver\ngjenst\xe5r."),(0,a.kt)("h2",{id:"datasett"},"Datasett"),(0,a.kt)("p",null,"Det er forskjell p\xe5 et API og et datasett. Begge deler b\xf8r designes og\ndokumenteres ved innf\xf8ring av en ny datakilde."),(0,a.kt)("p",null,"For et API m\xe5 tekniske detaljer dokumenteres, for eksempel\nautentiseringsmetoder og endepunkt. For et datasett m\xe5 begreper defineres og\ndataelementer beskrives."),(0,a.kt)("p",null,"Datasett kan med fordel beskrives i API-katalogen. Dagens API manager st\xf8tter\nikke statens anbefalte format for beskrivelser av datasett (DCAT), men kan\nbeskrives i et dokument, eller med en lenke til beskrivelsen."),(0,a.kt)("h2",{id:"personopplysninger"},"Personopplysninger"),(0,a.kt)("p",null,"Mange tjenester behandler personopplysninger. Da det er egne regler og lover\nsom p\xe5virker hvordan disse kan deles, anbefales det \xe5 skille personopplysninger\nfra andre data. Ved \xe5 holde dette adskilt blir det enklere \xe5 dele data som kan\ndeles."),(0,a.kt)("p",null,"Et eksempel: Et API gir oversikt over institusjonens organisasjonsenheter.\nDette kan enkelt deles ut med hvem som helst, siden det er offentlige data.\nMen, hvis dette API-et i samme utplukk ogs\xe5 lister ut hvilke ansatte og\nstudenter som er aktiv p\xe5 hver enhet, blir det straks mer utfordrende \xe5 gi\ntilgang."),(0,a.kt)("p",null,"\xc5 dele personopplysninger til konsumenter utenfor egen institusjon krever blant\nannet en databehandleravtale. \xc5 dele personopplysninger internt hos\ninstitusjonen kan kreve en oppdatering av hjemmelsgrunnlaget for\npersonpplysningene - f\xf8lger datadelingen opprinnelig form\xe5l og hjemmel for den\nnye behandlingen?"),(0,a.kt)("h2",{id:"anskaffelse-av-tjenester"},"Anskaffelse av tjenester"),(0,a.kt)("p",null,"Ogs\xe5 ved anskaffelse av IT-tjenester gjelder anbefalingene rundt deling av\ndata, p\xe5 samme m\xe5te som ved egen utvikling. Alle IT-tjenester med data som kan\neller b\xf8r deles er anbefalt \xe5 ha et API som f\xf8lger anbefalingene fra\nfellestjenesten."),(0,a.kt)("p",null,"Ofte kommer innkj\xf8pte IT-tjenester med et API, men det er ikke sikkert dette\ngir gevinstene du \xf8nsker."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Er API-et godt nok dokumentert?")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"F\xf8lger det prinsippet om l\xf8se koblinger? Hvor lukket og leverand\xf8rspesifikt\ner API-et? Kan andre konsumenter bruke det? F\xf8lger det noen standarder?")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Kan institusjonen f\xe5 inn endringer i API-et?")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Hva er lovnaden til ytelse og oppetid? Hvor mange konsumenter ville kunne\nbrukt API-et samtidig?"))),(0,a.kt)("p",null,"I anbud er det nyttig \xe5 legge inn krav til datadelingen, spesielt krav til API.\nFor viktige tjenester kan det ogs\xe5 v\xe6re nyttig \xe5 definere hvilket API\nleverand\xf8ren m\xe5 oppfylle, og hvis det ikke finnes en (bransje)standard til og\nmed designe API-et p\xe5 forh\xe5nd. Dette kan gj\xf8re datadelingen enklere etter at\nIT-tjenesten er kj\xf8pt inn."),(0,a.kt)("h2",{id:"versjonering"},"Versjonering"),(0,a.kt)("p",null,"Konsumenter trenger forutsigbarhet. N\xe5r et API lanseres, b\xf8r konsumenter\nforvente at det fungerer i lang tid f\xf8r konsumenten m\xe5 gj\xf8re endringer.\nAnbefalingen er som regel at en versjon av et API b\xf8r st\xf8ttes i ",(0,a.kt)("strong",{parentName:"p"},"minst seks\nm\xe5neder"),"."),(0,a.kt)("p",null,"Dette gj\xf8r at versjonering b\xf8r vere med i designet av et API. Hvordan skal\ntjenesten din st\xf8tte \xe5 tilgjengeliggj\xf8re data b\xe5de i et API for eksisterende\nkonsumenter og en nyere versjon av API-et?"),(0,a.kt)("p",null,"I RESTfulle API l\xf8ses dette ofte med \xe5 legge p\xe5 versjonen som del av stien til\nendepunktet. Noen eksempler:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"/v1/persons/ola\n/v2/persons/ola/contactinfo\n")),(0,a.kt)("p",null,"For datatilbydere som ogs\xe5 st\xf8tter notifikasjoner, b\xf8r dette ogs\xe5 reflekteres i\nmeldingene. Hvilken versjon av API-et skal notifikasjoner refere til? Kan/b\xf8r\ntjenesten st\xf8tte \xe5 sende ut en notifikasjon per aktive versjon av API-et?"),(0,a.kt)("h2",{id:"sjekkliste-for-api"},"Sjekkliste for API"),(0,a.kt)("p",null,"Hvis du designer et API:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Er API-et p\xe5 funksjonelt nok niv\xe5?"),(0,a.kt)("li",{parentName:"ul"},"F\xf8lger API-et prinsippene til RESTful?"),(0,a.kt)("li",{parentName:"ul"},"Inneholder API teknisk terminologi som egentlig burde v\xe6rt systeminterne?"),(0,a.kt)("li",{parentName:"ul"},"Trenger konsumenter \xe5 kjenne til interne detaljer om systemet bak for \xe5 kunne bruke API-et?"),(0,a.kt)("li",{parentName:"ul"},"M\xe5 du endre p\xe5 API-et hvis du gj\xf8r endringer i tjenestens datamodell?"),(0,a.kt)("li",{parentName:"ul"},"Klarer du \xe5 unng\xe5 \xe5 eksponere personpplysninger, og likevel klare \xe5\ntilgjengeliggj\xf8re andre opplysninger?"),(0,a.kt)("li",{parentName:"ul"},"Har du dokumentert ditt API etter ",(0,a.kt)("a",{parentName:"li",href:"https://www.openapis.org/"},"OpenAPI-spesifikasjonen")," (swagger)?"),(0,a.kt)("li",{parentName:"ul"},"Har du registrert API-et ditt i institusjoens API-katalog?")))}g.isMDXComponent=!0}}]);