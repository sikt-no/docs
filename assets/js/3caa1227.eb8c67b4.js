"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[9275],{3905:(e,t,n)=>{n.d(t,{Zo:()=>k,kt:()=>g});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},k=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,k=s(e,["components","mdxType","originalType","parentName"]),p=d(n),g=i,u=p["".concat(l,".").concat(g)]||p[g]||m[g]||a;return n?r.createElement(u,o(o({ref:t},k),{},{components:n})):r.createElement(u,o({ref:t},k))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var d=2;d<a;d++)o[d]=n[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4994:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var r=n(7462),i=(n(7294),n(3905));const a={},o="Defender-integrasjonen til eduCSC",s={unversionedId:"educsc/trusseletterretning/ms-defender",id:"educsc/trusseletterretning/ms-defender",title:"Defender-integrasjonen til eduCSC",description:"MS Defender er et stadig mer brukt verkt\xf8y for \xe5 beskytte endepunkt og tjenere i",source:"@site/docs/educsc/trusseletterretning/ms-defender.md",sourceDirName:"educsc/trusseletterretning",slug:"/educsc/trusseletterretning/ms-defender",permalink:"/docs/educsc/trusseletterretning/ms-defender",draft:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/educsc/trusseletterretning/ms-defender.md",tags:[],version:"current",lastUpdatedAt:1697719161,formattedLastUpdatedAt:"Oct 19, 2023",frontMatter:{},sidebar:"educsc",previous:{title:"Cybersikkerhetssenter for forskning og utdanning",permalink:"/docs/educsc/"}},l={},d=[{value:"Kom i gang med MS Defender-integrasjonen",id:"kom-i-gang-med-ms-defender-integrasjonen",level:2},{value:"Teknisk oppsett av MS Defender-integrasjon",id:"teknisk-oppsett-av-ms-defender-integrasjon",level:2}],k={toc:d};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"defender-integrasjonen-til-educsc"},"Defender-integrasjonen til eduCSC"),(0,i.kt)("p",null,"MS Defender er et stadig mer brukt verkt\xf8y for \xe5 beskytte endepunkt og tjenere i\nsektoren. eduCSC tilbyr derfor en integrasjon som mater l\xf8sningen med fersk\netterretning om truslene som vi sporer daglig. Det kommer inn fersk data fra oss\nhvert 10. minutt."),(0,i.kt)("p",null,"Integrasjonen kan beskytte virksomheten gjennom at vi legger inn ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/manage-indicators?view=o365-worldwide#indicator-of-compromise-ioc-overview"},"indikatorer p\xe5\nulike\ntrusler"),".\nMerk at effekten likevel er avhengig av hvordan virksomheten din har satt opp\nDefender, hvilke nettlesere som brukes, plattformer og s\xe5\xa0videre. Vi anbefaler\nderfor sterkt \xe5 vurdere dokumentasjonen til Microsoft n\xe6rmere for hvordan\noppsettes b\xf8r gj\xf8res for \xe5 f\xe5 effektiv beskyttelse:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Blokkering av velkjente IP-er og URL-er: Vi anbefaler alle \xe5 gj\xf8re en\nvurdering her, siden disse er effektive verkt\xf8y for \xe5 forebygge phishing og\nenkelte typer malware. For eksempel vil ikke n\xf8dvendigvis URL-beskyttelse\nfungere i andre nettlesere enn Edge uten ytterligere tiltak. Forsinkelen her\nkan ogs\xe5 v\xe6re opptil 2 timer ut mot endepunkt. ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/indicator-ip-domain?view=o365-worldwide#before-you-begin"},"Se dokumentasjonen til\nMicrosoft for mer\ndetaljer"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Filbasert beskyttelse: Vi gj\xf8r i liten grad filbasert sporing i dag, da disse\ner flyktige og ofte ferskvare. L\xf8sningen v\xe5r kan likevel finne p\xe5 \xe5 gj\xf8re det\ni sammenheng med skadelige epostvedlegg og lignende. ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/indicator-file?view=o365-worldwide#before-you-begin"},"Se dokumentasjonen til\nMicrosoft for mer informasjon om bruk og\noppsett"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Sertifikat: Vi gj\xf8r dette for TLS-sertifikatene for en del phishingnettsider,\nfor bredest mulig dekning. Merk at forsinkelsen p\xe5 disse deteksjonene kan v\xe6re\nopptil 3 timer forsinket, avhengig av oppsett. ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/indicator-certificates?view=o365-worldwide#before-you-begin"},"Se Microsoft for ytterligere\ndetaljer"),"."))),(0,i.kt)("h2",{id:"kom-i-gang-med-ms-defender-integrasjonen"},"Kom i gang med MS Defender-integrasjonen"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Send bestilling til ",(0,i.kt)("a",{parentName:"li",href:"mailto:kontakt@sikt.no."},"kontakt@sikt.no.")," MS Defender-integrasjonen er inkludert\nsom en del av\n",(0,i.kt)("a",{parentName:"li",href:"https://sikt.no/tjenester/cybersikkerhetssenter-forskning-og-utdanning"},"pluss-abonnementet"),"."),(0,i.kt)("li",{parentName:"ul"},"N\xe5r bestillingen er registrert, kan du sende info om ditt oppsett til eduCSC\nvia din organisasjons egen SRM-kanal p\xe5 Mattermost. eduCSC trenger f\xf8lgende\ninformasjon for \xe5 kunne aktivere MS Defender-integrasjonen for din\norganisasjon:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Directory (tenant) ID"),(0,i.kt)("li",{parentName:"ul"},"Application (client) ID"),(0,i.kt)("li",{parentName:"ul"},"Client secret"),(0,i.kt)("li",{parentName:"ul"},"Om du vil skru av blokkering i oppstarten (anbefalt)."),(0,i.kt)("li",{parentName:"ul"},"Om aktuelt: Et tak p\xe5 hvor mange indikatorer vi skal synkronisere.")))),(0,i.kt)("p",null,"For mer tekniske detaljer, se gjennomgangen under denne seksjonen."),(0,i.kt)("h2",{id:"teknisk-oppsett-av-ms-defender-integrasjon"},"Teknisk oppsett av MS Defender-integrasjon"),(0,i.kt)("p",null,"For \xe5 ta i bruk eduCSC sine sperrelister i Microsoft Defender ATP, m\xe5 du lage en\napp-registrering hos Microsoft. eduCSC bruker denne til \xe5 kople seg til og\nfortl\xf8pende legge inn indikatorer som skal blokkeres eller alarmeres."),(0,i.kt)("p",null,"L\xf8sningen v\xe5r bruker \xabcustom network indicators\xbb. Dette m\xe5 aktiveres manuelt\ngjennom Advanced-innstillingene i Defender for Endpoint. Se ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/advanced-features?view=o365-worldwide"},"Advanced\nSettings-dokumentasjonen"),"\nfor informasjon om hvordan du g\xe5r fram."),(0,i.kt)("p",null,"I forkant b\xf8r du gj\xf8re to vurderinger:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Hvordan skal utrulling skje?")," Vi kan skru av blokkering. Dermed vil ikke brukerne\nbli forhindret i oppstartsfasen, og evt. falske positive kan lukes ut. Vi tilr\xe5r\ndette alternativet for de aller fleste. Blokkering er enkelt \xe5 skru p\xe5 igjen."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Hvor mange indikatorer?")," Microsoft opererer for tiden med en grense p\xe5 15 000\negendefinerte indikatorer totalt i MS Defender. Dette inkluderer v\xe5re indikatorer.\n\xc5 g\xe5 over denne grensen kan f\xf8re til at synkroniseringen feiler. Det er derfor\nmulig \xe5 sette et tak p\xe5 hvor mange indikatorer du vil ha. Vi legger inn ferskere\nindikatorer eller de med h\xf8yere alvorlighet f\xf8rst. Det er ogs\xe5 enkelt \xe5 justere senere.")),(0,i.kt)("p",null,"Slik g\xe5r du fram:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Lag en app-registrering (se ",(0,i.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app"},"Microsoft sin\nguide"),").\nMerk deg ",(0,i.kt)("strong",{parentName:"li"},"\xabdirectory (tenant) ID\xbb")," og ",(0,i.kt)("strong",{parentName:"li"},"\xabapplication (client) ID\xbb"),"."),(0,i.kt)("li",{parentName:"ul"},"Via \xabAPI permissions\xbb, legg til WindowDefenderATP: Ti.ReadWrite (\xabRead and\nwrite IOCs belonging to the app\xbb).",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Du finner ",(0,i.kt)("inlineCode",{parentName:"li"},"WindowsDefenderATP")," under ",(0,i.kt)("inlineCode",{parentName:"li"},"APIs my organization uses"),", selv om det\nstrengt tatt er et offentlig Microsoft-API."),(0,i.kt)("li",{parentName:"ul"},"Merk: Dette er ",(0,i.kt)("strong",{parentName:"li"},"ikke")," det samme som tilgangene under \xabMicrosoft Graph\xbb.\nDette er et eldre API som verken vi eller Microsoft st\xf8tter."),(0,i.kt)("li",{parentName:"ul"},"Merk: Dette er ",(0,i.kt)("strong",{parentName:"li"},"ikke")," det samme som ",(0,i.kt)("inlineCode",{parentName:"li"},"Ti.ReadWrite.All"),". Vi anbefaler ikke \xe5 bruke denne, siden\nden gir st\xf8rre tilganger enn eduCSC trenger. Mer konkret kan vi med denne tilgangen b\xe5de se og endre\nindikatorer du eller andre leverand\xf8rer har lagt inn, som n\xe6r alltid er un\xf8dvendig."))),(0,i.kt)("li",{parentName:"ul"},"Via \xabCertificates and secrets\xbb, lag en client secret. ",(0,i.kt)("strong",{parentName:"li"},"Skriv ned innholdet i\nhemmeligheten"),", dvs. \xabclient secret\xbb. Husk ogs\xe5 at denne m\xe5 meldes til eduCSC\np\xe5 nytt om hemmeligheten g\xe5r ut p\xe5 dato (expiry).")),(0,i.kt)("p",null,"Meld deretter f\xf8lgende tilbake til eduCSC (via IRT-chat):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Directory (tenant) ID"),(0,i.kt)("li",{parentName:"ul"},"Application (client) ID"),(0,i.kt)("li",{parentName:"ul"},"(Client) secret, det vil si hemmeligheten du laget tidligere. Merk at dette er\nselve verdien og ",(0,i.kt)("strong",{parentName:"li"},"ikke")," \xabsecret ID\xbb. Om du ikke skrev det ned, slett den\ngamle hemmeligheten og lag en ny. Om hemmeligheten har begrenset varighet,\nsi hvilken dato (dag) den g\xe5r ut, slik at vi kan varsle n\xe6r utgangsdato."),(0,i.kt)("li",{parentName:"ul"},"Om du vil skru av blokkering i oppstarten (anbefalt)."),(0,i.kt)("li",{parentName:"ul"},"Om aktuelt: Et tak p\xe5 hvor mange indikatorer vi skal synkronisere.")),(0,i.kt)("p",null,"Synkronisering tar typisk 10 minutter etter det er lagt inn. Du kan stadfeste at\ndata kommer inn ved \xe5 bes\xf8ke ",(0,i.kt)("a",{parentName:"p",href:"https://security.microsoft.com"},"sikkerhetsportalen til Microsoft"),",\ng\xe5 til \xabSettings\xbb, deretter \xabEndpoints\xbb, \xabIndicators\xbb og til sist \xabURLs/Domains\xbb.\nTittelen p\xe5 reglene til eduCSC starter med \xabEDUCSC \xabFEEDNAVN\xbb -\xbb."),(0,i.kt)("p",null,"For \xe5 teste p\xe5 klient, sjekk om domenet ",(0,i.kt)("inlineCode",{parentName:"p"},"ms-atp.dnsbrannmur[.]no")," lager varsel\neller blokkering. Merk at det kan ta noe tid for Microsoft synkroniserer all\ndataen ut p\xe5 endepunkt."),(0,i.kt)("p",null,"Ved mistanke om falske positive, kontakt eduCSC via IRT-chat. Dette gjelder\nspesielt ved blokkering. Det samme gjelder om du vil gj\xf8re endringer i oppsettet,\nfor eksempel skru p\xe5 blokkering eller minke antallet indikatorer."))}m.isMDXComponent=!0}}]);