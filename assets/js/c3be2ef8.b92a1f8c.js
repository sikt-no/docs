"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[2443],{2909:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var s=r(4848),t=r(8453);const i={title:"Brukerdokumentasjon Verkt\xf8ykasser",last_update:{date:new Date("2023-09-26T00:00:00.000Z"),author:"morten.brekkevold@sikt.no"}},l=void 0,d={id:"nettadministrasjon/brukerdok",title:"Brukerdokumentasjon Verkt\xf8ykasser",description:"Innledning",source:"@site/docs/nettadministrasjon/brukerdok.md",sourceDirName:"nettadministrasjon",slug:"/nettadministrasjon/brukerdok",permalink:"/docs/nettadministrasjon/brukerdok",draft:!1,unlisted:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/nettadministrasjon/brukerdok.md",tags:[],version:"current",lastUpdatedAt:16956864e5,frontMatter:{title:"Brukerdokumentasjon Verkt\xf8ykasser",last_update:{date:"2023-09-26T00:00:00.000Z",author:"morten.brekkevold@sikt.no"}},sidebar:"nettadministrasjon",previous:{title:"Nettadministrasjon - Verkt\xf8ykasse",permalink:"/docs/nettadministrasjon/"},next:{title:"Xymon-integrasjon p\xe5 verkt\xf8ykasser",permalink:"/docs/nettadministrasjon/xymon"}},a={},o=[{value:"Innledning",id:"innledning",level:2},{value:"Vedlikeholdsvindu",id:"vedlikeholdsvindu",level:2},{value:"Sikkerhetsdirektiv for verkt\xf8ykassene",id:"sikkerhetsdirektiv-for-verkt\xf8ykassene",level:2},{value:"Kontaktpunkt",id:"kontaktpunkt",level:3},{value:"Brukertilgang til verkt\xf8ykassen",id:"brukertilgang-til-verkt\xf8ykassen",level:2},{value:"tftp",id:"tftp",level:2},{value:"FTP",id:"ftp",level:2},{value:"Oppsettet av FTP-tjeneren",id:"oppsettet-av-ftp-tjeneren",level:3},{value:"Anonym bruker",id:"anonym-bruker",level:4},{value:"ftpuser",id:"ftpuser",level:4},{value:"Radius",id:"radius",level:2},{value:"Syslog",id:"syslog",level:2},{value:"NAV",id:"nav",level:2},{value:"Web brukeradministrasjon",id:"web-brukeradministrasjon",level:3},{value:"Sett velkomstmelding m.m.",id:"sett-velkomstmelding-mm",level:3},{value:"Sett mottaker av NAV-adminstrativ epost",id:"sett-mottaker-av-nav-adminstrativ-epost",level:3},{value:"Sett passord til NAVs PostgreSQL-database",id:"sett-passord-til-navs-postgresql-database",level:3},{value:"&quot;Seede&quot; databasen:",id:"seede-databasen",level:3},{value:"Varslingssystemet Alert Profiles",id:"varslingssystemet-alert-profiles",level:3},{value:"Sjekk status p\xe5 bakgrunnsprosesser og logger",id:"sjekk-status-p\xe5-bakgrunnsprosesser-og-logger",level:3},{value:"Feils\xf8king av mobiltelefon/SMS-utsending",id:"feils\xf8king-av-mobiltelefonsms-utsending",level:3},{value:"Sette opp NAV/verkt\xf8ykassen for Radius Accounting-logging",id:"sette-opp-navverkt\xf8ykassen-for-radius-accounting-logging",level:3},{value:"Integrasjon med Argus",id:"integrasjon-med-argus",level:3},{value:"Sertifikath\xe5ndtering",id:"sertifikath\xe5ndtering",level:2},{value:"Netflow/NfSen",id:"netflownfsen",level:2},{value:"Generelt om Netflow",id:"generelt-om-netflow",level:3},{value:"Grafene",id:"grafene",level:3},{value:"Hvordan grave i detaljene",id:"hvordan-grave-i-detaljene",level:3},{value:"List Flows vs. Stat TopN",id:"list-flows-vs-stat-topn",level:3},{value:"S\xf8k i netflow dataene",id:"s\xf8k-i-netflow-dataene",level:3},{value:"Ferdigdefinerte filter man bruker ofte",id:"ferdigdefinerte-filter-man-bruker-ofte",level:3},{value:"Lage profiler",id:"lage-profiler",level:3},{value:"Alert",id:"alert",level:3},{value:"Feils\xf8king av nfsen",id:"feils\xf8king-av-nfsen",level:3},{value:"Command line tools",id:"command-line-tools",level:2},{value:"Hobbit/Xymon",id:"hobbitxymon",level:2},{value:"Firewall Builder (fwbuilder)",id:"firewall-builder-fwbuilder",level:2}];function k(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"innledning",children:"Innledning"}),"\n",(0,s.jsxs)(n.p,{children:["Dette dokument er myntet p\xe5 lokalt IKT driftspersonell ved\nh\xf8gskole/universitet som er bruker av verkt\xf8ykassen. Verkt\xf8ykassene er\nsom kjent drevet fra Sikt. Driftsinstruks for Sikt Service Center og\nberedskapsvakt ",(0,s.jsx)(n.a,{href:"https://kind.uninett.no/driftwiki/instruks/vk/index.html",children:"foreligger i\ntillegg"}),". Se Sikts nettsider ",(0,s.jsx)(n.a,{href:"https://sikt.no/tjenester/nettadministrasjon",children:"for\nen generell beskrivelse av tjenesten"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["For \xe5 benytte flere av tjenestene p\xe5 verkt\xf8ykassen kreves naturlig nok\nrelevant konfigurasjon av nettutstyret. Vi viser til ",(0,s.jsx)(n.a,{href:"https://www.uninett.no/ufs/nett",children:"Uninett\nfagspesifikasjoner (UFS-er)"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Vi minner ogs\xe5 om at svitsjene i campusnettet b\xf8r (les: ",(0,s.jsx)(n.em,{children:"m\xe5"}),") v\xe6re p\xe5 en\nforsvarlig programvareversjon."]}),"\n",(0,s.jsx)(n.h2,{id:"vedlikeholdsvindu",children:"Vedlikeholdsvindu"}),"\n",(0,s.jsxs)(n.p,{children:["Tjenesten har fast vedlikeholdsvindu p\xe5 ",(0,s.jsx)(n.strong,{children:"tirsdager mellom klokken 10:00\nog 11:00"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"I dette tidsrommet kan det bli utf\xf8rt mindre oppgraderinger og omstart\nav maskinvaren, hovedsakelig i forbindelse med sikkerhetsoppdateringer,\nuten at det blir gitt n\xe6rmere beskjed i forkant. Det kan forekomme\nmerkbare driftsforstyrrelser."}),"\n",(0,s.jsx)(n.h2,{id:"sikkerhetsdirektiv-for-verkt\xf8ykassene",children:"Sikkerhetsdirektiv for verkt\xf8ykassene"}),"\n",(0,s.jsxs)(n.p,{children:["Sikt har driftsansvar for verkt\xf8ykassene, se definert\n",(0,s.jsx)(n.a,{href:"/docs/nettadministrasjon/sikkerhetsdirektiv",children:"sikkerhetsdirektiv"})," for detaljer rundt drift-\nog sikkerhetsopplegget."]}),"\n",(0,s.jsxs)(n.p,{children:["Siden driftsansvaret ligger til Sikt er ryddigste l\xf8sning at ",(0,s.jsx)(n.em,{children:"kun"})," Sikt\nhar root-privilegier p\xe5 verkt\xf8ykassene. Vi er naturligvis opptatt av at\ndere som brukere kan gj\xf8re tilstrekkelig for \xe5 rette feil rundt\napplikasjonene m.m. Dette gj\xf8r vi ved \xe5 gi dere n\xf8dvendige\nsudo-rettigheter, samt lesetilgang til filer (se Brukertilgang under)."]}),"\n",(0,s.jsx)(n.h3,{id:"kontaktpunkt",children:"Kontaktpunkt"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For driftshenvendelser, ta kontakt med ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"})]}),"\n",(0,s.jsxs)(n.li,{children:["For diskusjon/sp\xf8rsm\xe5l om bruk av verkt\xf8yene, bruk\n",(0,s.jsx)(n.a,{href:"mailto:vk@lister.sikt.no",children:"vk@lister.sikt.no"}),".\nAlle som er registrert i Sikts driftsdatabase som teknisk ansvarlig\nfor en verkt\xf8ykasse ute hos en kunde blir automatisk abonnent p\xe5\ndenne listen."]}),"\n",(0,s.jsxs)(n.li,{children:["Se ellers ",(0,s.jsx)(n.a,{href:"https://sikt.no/kontakt-oss",children:"kontaktadresser og telefonnumre p\xe5 v\xe5re\nhjemmesider"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"brukertilgang-til-verkt\xf8ykassen",children:"Brukertilgang til verkt\xf8ykassen"}),"\n",(0,s.jsxs)(n.p,{children:["For \xe5 logge inn p\xe5 verkt\xf8ykassen med ssh m\xe5 du ha bruker.  Den som er teknisk\nansvarlig for verkt\xf8ykassen i din organisasjon kan bestille brukere ved \xe5\nsende ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"e-post til kontakt@sikt.no"}),".  Nye brukere vil\nf\xe5 satt et midlertidig passord av Sikt og b\xf8r endre dette ved f\xf8rste gangs\ninnlogging.  Merk at det passordet du velger for denne kontoen er det samme\nsom vil brukes dersom du setter opp verkt\xf8ykassen som radiustjener for\nnettutstyret ditt."]}),"\n",(0,s.jsxs)(n.p,{children:["Alle brukere som er i gruppe ",(0,s.jsx)("span",{class:"kbd",children:"netops"})," gis (via\n",(0,s.jsx)(n.em,{children:"sudo"}),") tilgang til \xe5 gj\xf8re noen kommandoer som normalt trenger\nroot-tilgang. For \xe5 se hvilke sudo-muligheter man har kan man kj\xf8re\nkommandoen:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo -l\n"})}),"\n",(0,s.jsx)(n.p,{children:"Blant kommandoene som kan kj\xf8res via sudo er:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"nav"}),": Generell kommando for \xe5 kontrollere nav"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"service apache2 reload"}),": Relaste konfigurasjon for webtjeneren"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"service nfsen \\[start|stop\\]"}),": Starte/stoppe NfSen"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For \xe5 relaste apache webtjeneren kan man feks kj\xf8re kommandoen:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo service apache2 reload\n"})}),"\n",(0,s.jsx)(n.h2,{id:"tftp",children:"tftp"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"tftp"}),"-tjenesten gj\xf8r det mulig \xe5 skrive og laste konfigurasjon til/fra\nnettutstyret. ",(0,s.jsx)(n.em,{children:"tftp"}),"-demonen er sikret med en konfigurasjonsfil\n",(0,s.jsx)(n.code,{children:"/tftpboot/tftpd.conf"}),". For \xe5 forenkle vedlikehold blir denne filen\nautogenerert etter f\xf8lgende kj\xf8reregler."]}),"\n",(0,s.jsx)(n.p,{children:"N\xe5r en ny svitsj skal legges til i tftp konfigurasjonen:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Legg til svitsjen i ",(0,s.jsx)(n.code,{children:"/tftpboot/tftpd.txt"})," Syntaks sees lett i fila:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'        "svitsj"           "ipadresse"\neks:    lillehammer-gsw     128.39.3.44\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Etter at ",(0,s.jsx)(n.code,{children:"tftpd.txt"})," er redigert, kj\xf8r make (du st\xe5r p\xe5 ",(0,s.jsx)(n.code,{children:"/tftpboot"}),")\nVips, s\xe5 er ny ",(0,s.jsx)(n.code,{children:"tftp.conf"})," laget."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:['Du m\xe5 da opprette den nye filen med touch "svitsj-confg" (eks: ',(0,s.jsx)(n.code,{children:"touch lillehammer-gsw-confg"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"N\xe5 kan du fra svitsjen skrive konfigurasjonen til verkt\xf8ykasse med\nwrite network."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Tilsvarende kan bokser slettes fra ",(0,s.jsx)(n.code,{children:"tftpd.txt"})," / ",(0,s.jsx)(n.code,{children:"tftpd.conf"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["For \xe5 bevare historikk p\xe5 konfigurasjon benyttes ",(0,s.jsx)(n.em,{children:"RCS"}),". Opplegget er\nautomatisert ved at en nattlig cronjobb sjekker inn ny versjon av alle\nfiler som er endret. Alle endringer blir rapportert som epost til\nmottagere angitt via variabelen nocoperators i fila\n",(0,s.jsx)(n.code,{children:"/etc/default/uninett.conf"})," (merk at denne filen er styrt av Sikts Puppet,\nta kontakt med ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"})," for \xe5 f\xe5 gjort endringer). En varsling\nom l\xe5ste RCS-filer (avglemte innsjekkinger) blir ogs\xe5 sendt periodisk\ntil samme adresse."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["I tillegg til konfigurasjoner ligger ogs\xe5 aksesslistefiler p\xe5\n",(0,s.jsx)(n.code,{children:"/tftpboot"}),". Vedlikehold av disse og arbeid med aksesslister generelt\ner ikke omtalt her. Se ",(0,s.jsx)(n.code,{children:"README"}),"-fil p\xe5 ",(0,s.jsx)(n.code,{children:"/tftpboot"})," for mer info p\xe5\ndette."]}),"\n",(0,s.jsxs)(n.li,{children:["En siste ting som ligger p\xe5 ",(0,s.jsx)(n.code,{children:"/tftpboot"})," er software-imager. Disse kan\nlastes til svitsjer for oppgradering."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ftp",children:"FTP"}),"\n",(0,s.jsxs)(n.p,{children:["Fra 2023 er en ",(0,s.jsx)(n.em,{children:"FTP"}),"-tjener (basert p\xe5 ",(0,s.jsx)(n.em,{children:"proftpd"}),") et nytt mulig tilvalg p\xe5\nverkt\xf8ykassen.  Dette kommer som et alternativ til det tftp-baserte\nkonfigurasjonsarkivet under ",(0,s.jsx)(n.code,{children:"/tftpboot"})," og kan v\xe6re nyttig dersom man har\nutstyrstyper som ikke st\xf8tter (eller frar\xe5der) bruk av tftp-protokollen til \xe5\nfjernlagre konfigurasjon eller hente programvare.  Forel\xf8pig gjelder dette mest\nJuniper-utstyr."]}),"\n",(0,s.jsxs)(n.p,{children:["For \xe5 ta i bruk FTP-tjeneren p\xe5 din verkt\xf8ykasse m\xe5 man be Sikt om \xe5 sl\xe5 den p\xe5\nf\xf8rst, ved \xe5 kontakte ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"oppsettet-av-ftp-tjeneren",children:"Oppsettet av FTP-tjeneren"}),"\n",(0,s.jsxs)(n.p,{children:["FTP-tjeneren vil servere filer fra katalogen ",(0,s.jsx)(n.code,{children:"/tftpboot"}),".  Den er i\nutgangspunktet satt opp med \xe8n anonym bruker og en autentisert bruker, som har\nforskjellige tilgangsniv\xe5er."]}),"\n",(0,s.jsx)(n.h4,{id:"anonym-bruker",children:"Anonym bruker"}),"\n",(0,s.jsxs)(n.p,{children:["Anonym FTP tillates, men den anonyme brukeren vil kun ha lesetilgang til filer\nsom eies av systembrukeren ",(0,s.jsx)(n.code,{children:"ftp"}),", og ingen skrivetilgang.  I utganspunktet vil\nbare katalogen ",(0,s.jsx)(n.code,{children:"/tftptboot/images"})," v\xe6re lesbar for denne brukeren."]}),"\n",(0,s.jsx)(n.h4,{id:"ftpuser",children:"ftpuser"}),"\n",(0,s.jsxs)(n.p,{children:["Den autentiserte brukerkontoen heter ",(0,s.jsx)(n.code,{children:"ftpuser"}),", som samsvarer med OS-brukeren\n",(0,s.jsx)(n.code,{children:"ftpuser"}),".  I tilfellet verkt\xf8ykassen er en CNaaS-kasse, vil denne brukerens\npassord styres fra Vault.  I alle andre tilfeller m\xe5 man sette passordet for\nbrukeren lokalt p\xe5 verkt\xf8ykassen. Dette kan gj\xf8res av alle brukere som er\nmedlem av gruppen ",(0,s.jsx)(n.code,{children:"netops"}),", ved \xe5 kj\xf8re kommandoen ",(0,s.jsx)(n.code,{children:"sudo passwd ftpuser"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"radius",children:"Radius"}),"\n",(0,s.jsxs)(n.p,{children:["Det er ingen bruker-konfigurasjon forbundet med radius som trengs \xe5\nkonfigureres p\xe5 verkt\xf8ykassene. Dette fordi radius er satt opp til bruke\n",(0,s.jsx)(n.code,{children:"/etc/passwd"})," som sin brukerkilde. Dersom brukerne her har satt passord\nblir dette benyttet ved radiusautentisering. Dersom bruker p\xe5\nnettutstyret logger seg p\xe5 med ",(0,s.jsx)(n.code,{children:"@uninett.no"}),"-endelse s\xe5 er radiustjener p\xe5\nverkt\xf8ykassen satt opp til \xe5 rel\xe9e foresp\xf8rsler til radiustjener p\xe5\n",(0,s.jsx)(n.code,{children:"trane.uninett.no"}),". S\xe5ledes kan Sikt drift komme inn (dersom \xf8nskelig)."]}),"\n",(0,s.jsxs)(n.p,{children:["Det som imidlertid ",(0,s.jsx)(n.em,{children:"m\xe5"})," konfigureres er ",(0,s.jsx)(n.code,{children:"/etc/freeradius/clients.conf"})]}),"\n",(0,s.jsx)(n.p,{children:"Eksempel fra HiL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"client 128.39.109.0/26 {\n   secret       = felles-hemmelighet\n   shortname    = hil-mngmt\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Det vi angir her at alle svitsjene i omr\xe5det 128.39.109.1-63 tillates \xe5\nsnakke radius med verkt\xf8ykassen gitt at de er konfigurert med samme\nfelles-hemmelighet. Endringer i ",(0,s.jsx)(n.code,{children:"/etc/freeradius/clients.conf"})," styres med\nPuppet og m\xe5 meldes inn til ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"syslog",children:"Syslog"}),"\n",(0,s.jsxs)(n.p,{children:["All nettelektronikk b\xf8r syslogge til verkt\xf8ykassen. Syslog er satt opp\nslik at alle meldinger logget til verkt\xf8ykassen fra nettverket p\xe5\nfacility ",(0,s.jsx)(n.code,{children:"local6"})," og ",(0,s.jsx)(n.code,{children:"local7"})," blir lagret i disse to filene:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/var/log/network.log"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/var/log/network_nav.log"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Sistnevnte fil blir igjen lest og t\xf8mt av NAV sin bakgrunnsprosess\n",(0,s.jsx)(n.code,{children:"logengine"}),", som kj\xf8rer \xe9n gang i minuttet. Dataene blir lagt i NAVs\nsyslog-database og er igjen s\xf8kbare gjennom NAVs ",(0,s.jsx)(n.em,{children:"Syslog Analyzer tool"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"network.log"})," blir ikke t\xf8mt, men komprimert og rotert en gang i d\xf8gnet.\nDere kan s\xe5ledes velge \xe5 s\xf8ke i syslog i tekstmodus, direkte p\xe5\nverkt\xf8ykassen, eller via NAV."]}),"\n",(0,s.jsx)(n.h2,{id:"nav",children:"NAV"}),"\n",(0,s.jsxs)(n.p,{children:["NAV er omfattende \xe5 forklare. Vi viser her til ",(0,s.jsx)(n.a,{href:"https://nav.readthedocs.io/en/latest/",children:"NAVs egen\ndokumentasjon"}),". Litt starthjelp:"]}),"\n",(0,s.jsx)(n.h3,{id:"web-brukeradministrasjon",children:"Web brukeradministrasjon"}),"\n",(0,s.jsxs)(n.p,{children:["Det er ikke noe dokument som beskriver hvordan du oppretter brukere og\nhvordan du tilordner brukere til grupper. Helt kort; dette gj\xf8r du under\nverkt\xf8yet ",(0,s.jsx)(n.em,{children:"User and API Administration"}),". Det er rett frem \xe5 legge til\nbrukere, men husk at de m\xe5 tilordnes en eller flere grupper. Merk ogs\xe5\nat du kan redigere privilegiene til en gruppe. Se f.eks p\xe5 gruppen\n",(0,s.jsx)(n.em,{children:"ReadAll"}),", her vil du se at denne har et ",(0,s.jsx)(n.code,{children:"web_access"}),"-privilegie som gir\ntilgang til en del verkt\xf8y, men ikke alle. Dette gir deg en ide om\nhvordan ",(0,s.jsx)(n.code,{children:"web_access"}),"-privilegier kan justeres. Merk at det er mulig \xe5\nbruke LDAP til brukerautentisering. Du m\xe5 da gj\xf8re innstillinger i fila\n",(0,s.jsx)(n.code,{children:"/etc/nav/webfront/webfront.conf"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"sett-velkomstmelding-mm",children:"Sett velkomstmelding m.m."}),"\n",(0,s.jsxs)(n.p,{children:["En rekke filer i katalogen ",(0,s.jsx)(n.code,{children:"/etc/nav/webfront/"})," kan redigeres for \xe5\ntilpasse innholdet i forside-widgetene for velkomstmelding og lenker."]}),"\n",(0,s.jsx)(n.h3,{id:"sett-mottaker-av-nav-adminstrativ-epost",children:"Sett mottaker av NAV-adminstrativ epost"}),"\n",(0,s.jsxs)(n.p,{children:["All administrativ epost fra NAV sendes til driftspersonell hos Sikt, som\nkonfigurert av ",(0,s.jsx)(n.em,{children:"Puppet"})," i variabelen ",(0,s.jsx)(n.code,{children:"ADMIN_MAIL"})," i filen\n",(0,s.jsx)(n.code,{children:"/etc/nav/nav.conf"}),". Dersom du \xf8nsker kopier av denne eposten, ta\nkontakt med Sikt."]}),"\n",(0,s.jsx)(n.h3,{id:"sett-passord-til-navs-postgresql-database",children:"Sett passord til NAVs PostgreSQL-database"}),"\n",(0,s.jsxs)(n.p,{children:["Dette er satt for deg. Passordet kan leses fra attributten ",(0,s.jsx)(n.code,{children:"userpw_nav"}),"\ni filen ",(0,s.jsx)(n.code,{children:"/etc/nav/db.conf"}),". Merk at du kan aksessere denne databasen ved\n\xe5 bruke dette passordet n\xe5r du skriver ",(0,s.jsx)(n.code,{children:"psql nav nav"}),". For dypere feils\xf8king, eller dypere forst\xe5else av databasen\ner dette nyttig."]}),"\n",(0,s.jsx)(n.h3,{id:"seede-databasen",children:'"Seede" databasen:'}),"\n",(0,s.jsxs)(n.p,{children:['For at NAV skal overv\xe5ke nettverket ditt m\xe5 den f\xe5 "seed"-informasjon\nfra deg. Du bruker verkt\xf8yet ',(0,s.jsx)(n.em,{children:"Seed Database"})," (fra Toolbox) til dette.\nLes mer om hvordan du ",(0,s.jsx)(n.a,{href:"https://nav.readthedocs.io/en/latest/intro/getting-started.html#seeding-your-database",children:"legger inn seed-data i\nNAV"}),"\nog ",(0,s.jsx)(n.a,{href:"https://nav.readthedocs.io/en/latest/intro/getting-organized.html",children:"hvordan du organiserer\ninformasjonen"}),"\ni NAVs offisielle dokumentasjon."]}),"\n",(0,s.jsx)(n.h3,{id:"varslingssystemet-alert-profiles",children:"Varslingssystemet Alert Profiles"}),"\n",(0,s.jsxs)(n.p,{children:["Varslingssystemet er noks\xe5 omfattende med mange muligheter. For \xe5\nforenkle initielt oppsett er det en rekke forh\xe5ndsdefinerte filtre og\nfiltergrupper du kan bruke. Les ",(0,s.jsx)(n.a,{href:"https://nav.uninett.no/wiki/alertprofiles",children:"wiki-siden om Alert\nProfiles"})," for en introduksjon\ntil systemet."]}),"\n",(0,s.jsx)(n.h3,{id:"sjekk-status-p\xe5-bakgrunnsprosesser-og-logger",children:"Sjekk status p\xe5 bakgrunnsprosesser og logger"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Kommandoen ",(0,s.jsx)(n.code,{children:"sudo nav status"})," gir status p\xe5 om\nNAVs ulike bakgrunnsprosesser og cronjobber er aktive."]}),"\n",(0,s.jsxs)(n.li,{children:["Innsamlingsmotoren ",(0,s.jsx)(n.em,{children:"ipdevpoll"})," logger (bl.a.) til\n",(0,s.jsx)(n.code,{children:"/var/log/nav/ipdevpoll.log "})]}),"\n",(0,s.jsxs)(n.li,{children:["I samme katalog se tilsvarende log for ",(0,s.jsx)(n.code,{children:"navtopology.log"}),"\n(topologioppdageren) ",(0,s.jsx)(n.code,{children:"pping.log"})," (statusmonitoren), ",(0,s.jsx)(n.code,{children:"servicemon.log"}),"\n(tjenesteoverv\xe5keren), ",(0,s.jsx)(n.code,{children:"thresholdmon.log"})," (terskeloverv\xe5keren),\n",(0,s.jsx)(n.code,{children:"eventengine.log"})," (hendelsessystemet) og ",(0,s.jsx)(n.code,{children:"alertengine.log"}),"\n(alarmsystemet)."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"feils\xf8king-av-mobiltelefonsms-utsending",children:"Feils\xf8king av mobiltelefon/SMS-utsending"}),"\n",(0,s.jsxs)(n.p,{children:["Dersom du har problemer med utsending av SMS fra verkt\xf8ykassen, kan du\ngj\xf8re litt f\xf8rstelinjes feils\xf8king f\xf8r du feilmelder situasjonen til\n",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Dersom mobilen/GSM-enheten er koblet til med en USB, verifis\xe9r at\nmobilen/GSM-enheten er synlig p\xe5 USB-bussen: ",(0,s.jsx)(n.code,{children:"lsusb"})]}),"\n",(0,s.jsx)(n.p,{children:"Forventet output skal ligne p\xe5 dette"}),"\n",(0,s.jsxs)(n.p,{children:["Bus 004 Device 001: ID 0000:0000\nBus 003 Device 001: ID 0000:0000\nBus 002 Device 001: ID 0000:0000\nBus 001 Device 003: ID 0fce",":d057"," Sony Ericsson Mobile Communications AB\nBus 001 Device 001: ID 0000:0000"]}),"\n",(0,s.jsx)(n.p,{children:"Dersom det er en GSM-enhet tilkoblet med USB-dongle er det donglen,\nog ikke GSM-enheten som blir identifisert. Se siste linje:"}),"\n",(0,s.jsx)(n.p,{children:"Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub\nBus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub\nBus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub\nBus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub\nBus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub\nBus 005 Device 002: ID 0a81:0205 Chesen Electronics Corp. PS/2 Keyboard+Mouse Adapter\nBus 005 Device 003: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verifis\xe9r at Gammu klarer \xe5 gjenkjenne den tilkoblede\nmobiltelefonen: ",(0,s.jsx)(n.code,{children:"sudo -u navcron gammu --identify"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verifis\xe9r at mobiltelefonen har forbindelse med GSM-nettverket:\n",(0,s.jsx)(n.code,{children:"sudo -u navcron gammu --networkinfo"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verifis\xe9r at Gammu kan sende SMS-meldinger til din telefon:\n",(0,s.jsx)(n.code,{children:'echo "Melding" | sudo -u navcron gammu --sendsms TEXT <tlfnr>'})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verifis\xe9r at NAVs SMS-daemon kan sende SMS-meldinger til din\ntelefon: ",(0,s.jsx)(n.code,{children:"sudo -u navcron smsd.py -t <tlfnr>"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"sette-opp-navverkt\xf8ykassen-for-radius-accounting-logging",children:"Sette opp NAV/verkt\xf8ykassen for Radius Accounting-logging"}),"\n",(0,s.jsxs)(n.p,{children:["NAV tilbyr ",(0,s.jsx)(n.a,{href:"https://nav.uninett.no/wiki/radius",children:"brukersporing via accounting-logging fra\nFreeRADIUS-tjenere"}),". Dette krever en\ndel aktiv inngripen fra din egen side."]}),"\n",(0,s.jsxs)(n.p,{children:["Der man har en FreeRADIUS-tjener som autentiserer brukerinnlogginger, m\xe5\ndenne konfigureres til \xe5 logge accounting-data til NAVs\nPostgreSQL-database. I tillegg b\xf8r man sette opp et Python-program p\xe5\nFreeRADIUS-tjeneren som overv\xe5ker error-loggen dens og dytter disse\ninnslagene til samme PostgreSQL-database. ",(0,s.jsx)(n.a,{href:"https://nav.uninett.no/wiki/radius",children:"Fremgangsm\xe5ten er dokumentert\np\xe5 NAV-wikien."})]}),"\n",(0,s.jsxs)(n.p,{children:["Deretter m\xe5 Sikt gj\xf8re konfigurasjonsendringer p\xe5 verkt\xf8ykassens\nPostgreSQL-database, slik at denne tillater innlogging fra din\nFreeRADIUS-tjener. Meld inn f\xf8lgende detaljer til ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"At du \xf8nsker \xe5 sende FreeRADIUS accounting-logger til verkt\xf8ykassen."}),"\n",(0,s.jsx)(n.li,{children:"IP-adressen(e) til din(e) FreeRADIUS-tjener(e)."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Sikt vil s\xf8rge for at det opprettes en PostgreSQL-bruker for radius\naccounting, og at denne gis tilgang til de riktige tabellene i NAV fra\nde gitte IP-adressene. Du vil f\xe5 et brukernavn og et passord til\nPostgreSQL-databasen, som skal brukes til \xe5 konfigurere\nFreeRADIUS-tjeneren med."}),"\n",(0,s.jsx)(n.h3,{id:"integrasjon-med-argus",children:"Integrasjon med Argus"}),"\n",(0,s.jsxs)(n.p,{children:["Dersom du \xf8nsker \xe5 integrere NAV-installasjonen p\xe5 din verkt\xf8ykasse med en\nArgus-instans, kan limetjenesten for dette enkelt sl\xe5s p\xe5 for din verkt\xf8ykasse\nved bestilling til ",(0,s.jsx)(n.a,{href:"mailto:kontakt@sikt.no",children:"kontakt@sikt.no"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["N\xe5r limetjenesten ",(0,s.jsx)(n.code,{children:"nav-argus-glue"})," sl\xe5s p\xe5, vil konfigurasjonsfilen\n",(0,s.jsx)(n.code,{children:"/etc/nav/navargus.yml"})," opprettes og gj\xf8res skrivbar for alle som er medlem av\ngruppen ",(0,s.jsx)(n.code,{children:"netops"}),".  Event Engine vil automatisk konfigureres til \xe5 levere\nhendelser til limetjenesten.  Dokumentasjon for selve limetjenesten fins p\xe5\n",(0,s.jsx)(n.a,{href:"https://github.com/Uninett/nav-argus-glue",children:"https://github.com/Uninett/nav-argus-glue"})]}),"\n",(0,s.jsx)(n.p,{children:"N\xe5r limetjenesten er konfigurert, kan konnektivitet mot din Argus-instans\ntestes ved \xe5 utf\xf8re f\xf8lgende kommando:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"/opt/venvs/nav/bin/navargus --test-api\n"})}),"\n",(0,s.jsxs)(n.p,{children:["V\xe6r oppmerksom p\xe5 at ved konfigurasjonendringer i ",(0,s.jsx)(n.code,{children:"navargus.yml"})," b\xf8r NAVs Event\nEngine restartes med kommandoen ",(0,s.jsx)(n.code,{children:"sudo nav restart eventengine"})," for \xe5 sikre at\nendringene tar effekt umiddelbart."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"navargus"})," kan ogs\xe5 kj\xf8res manuelt for \xe5 ta ut en rapport om hvilke NAV-alarmer\nog Argus-hendelser som ikke er synkroniserte, eller for \xe5 tvinge gjennom en\nfull synkronisering.  Se f\xf8lgende kommando for mer hjelp p\xe5 dette:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"/opt/venvs/nav/bin/navargus --help\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sertifikath\xe5ndtering",children:"Sertifikath\xe5ndtering"}),"\n",(0,s.jsxs)(n.p,{children:["Webtjeneren p\xe5 verkt\xf8ykassen er bare tilgjengelig over ",(0,s.jsx)(n.em,{children:"HTTPS"}),". Dette\nkrever et tjenersertifikat. Vi bruker i dag ",(0,s.jsx)(n.a,{href:"https://letsencrypt.org/",children:"Let's\nEncrypt"})," til \xe5 automatisk utstede sertifikater\ntil webtjeneren."]}),"\n",(0,s.jsx)(n.p,{children:"Let's Encrypt krever i utgangspunktet at webtjeneren er tilgjengelig fra\nsine IP-adressser for \xe5 kunne utfordre den til \xe5 bevise sin identitet.\nDisse IP-adressene offentliggj\xf8res ikke, og Let's Encrypt forbeholder\nseg retten til \xe5 endre disse n\xe5r som helst, uten forvarsel. Webtjeneren\np\xe5 verkt\xf8ykassen holder de n\xf8dvendige URLene \xe5pne for verden, men kan\nellers begrense aksess til et valgfritt sett med IP-adresser. Henvend\ndeg til v\xe5rt kontaktpunkt dersom du \xf8nsker endringer i restriksjonene."}),"\n",(0,s.jsx)(n.h2,{id:"netflownfsen",children:"Netflow/NfSen"}),"\n",(0,s.jsxs)(n.p,{children:["Verkt\xf8ykassene bruker ",(0,s.jsx)(n.a,{href:"http://nfsen.sourceforge.net/",children:"NfSen"})," for \xe5\nprosessere netflowdata som blir eksportert fra rutere. NfSen er et\nweb-basert grensesnitt til ",(0,s.jsx)(n.a,{href:"http://nfdump.sourceforge.net/",children:"nfdump netflow\ntools"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Dette grensesnittet er tilgjengelig via NAV sin toolbox."}),"\n",(0,s.jsx)(n.p,{children:"Nfsen ser ut til \xe5 v\xe6re litt kilen mhp. p\xe5 \xe5 definere nye\nnetflow-eksport\xf8rer ('sources') etter at systemet er startet , s\xe5 det er\nlurt \xe5 ha alle disse klart p\xe5 forh\xe5nd, og legge alle inn f\xf8r systemet\nstartes opp."}),"\n",(0,s.jsxs)(n.p,{children:["Kildene defineres under ",(0,s.jsx)(n.code,{children:"sources"})," i\n",(0,s.jsx)(n.code,{children:"/etc/nfsen/nfsen.conf.local"}),". Denne filen konfigureres\nav Puppet; eventuelle endrings\xf8nsker m\xe5 meldes til Sikt."]}),"\n",(0,s.jsxs)(n.p,{children:["Mere inng\xe5ende detaljer ang\xe5ende bruk av nfsen st\xe5r p\xe5\n",(0,s.jsx)(n.a,{href:"http://nfsen.sourceforge.net/",children:"nfsen"})," sine hjemmesider."]}),"\n",(0,s.jsx)(n.h3,{id:"generelt-om-netflow",children:"Generelt om Netflow"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"En flow er definert som et sett av IP pakker som har en del felles\nfelt i pakkehodet."}),"\n",(0,s.jsxs)(n.li,{children:["De felt som brukes for \xe5 identifisere flows er:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Source IP adress"}),"\n",(0,s.jsx)(n.li,{children:"Destination IP adress"}),"\n",(0,s.jsx)(n.li,{children:"Source port number"}),"\n",(0,s.jsx)(n.li,{children:"Destination port number"}),"\n",(0,s.jsx)(n.li,{children:"Protocol type"}),"\n",(0,s.jsx)(n.li,{children:"Type of service"}),"\n",(0,s.jsx)(n.li,{children:"Input interface"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"grafene",children:"Grafene"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:['Grafene vil vise trafikk-m\xf8nsteret til kildene man eksporterer\nnetflow-data ifra. Default er det satt opp slik at grafene er\n"stacked". Dvs. at dersom man eksporterer ifra flere kilder (har\nflere farger p\xe5 grafene), legges den ene grafen p\xe5 toppen av den\nandre. Dette kan man endre ved \xe5 trykke p\xe5 ',(0,s.jsx)(n.em,{children:"line graph"})," p\xe5\n",(0,s.jsx)(n.em,{children:"details"}),"-fanen. Her kan man ogs\xe5 endre til logaritmisk skala."]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.em,{children:"Graphs"}),"-fanen kan man se st\xf8rre grafer for henholdsvis ",(0,s.jsx)(n.em,{children:"Flows"}),",\n",(0,s.jsx)(n.em,{children:"Packets"})," eller ",(0,s.jsx)(n.em,{children:"Traffic"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.em,{children:"Details"}),"-fanen kan man se detaljer for enten ",(0,s.jsx)(n.em,{children:"Flows"}),", ",(0,s.jsx)(n.em,{children:"Packets"}),"\neller ",(0,s.jsx)(n.em,{children:"Traffic"}),". Man kan velge en av de andre i de sm\xe5 thumbnailene p\xe5\nh\xf8yresiden."]}),"\n",(0,s.jsxs)(n.li,{children:["Dersom man vil ekskludere en kilde ifra grafene, kan man trykke p\xe5\nkrysset under ",(0,s.jsx)(n.code,{children:"source"})," for hver kilde."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"hvordan-grave-i-detaljene",children:"Hvordan grave i detaljene"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Angi tidsperiode"}),"\n",(0,s.jsxs)(n.li,{children:["Dette gj\xf8r du enten ved \xe5 la den st\xe5 p\xe5 ",(0,s.jsx)(n.code,{children:"Single Timeslot"})," (5 min) under grafen, eller du velger en lengre\ntidsperiode med \xe5 velge ",(0,s.jsx)(n.code,{children:"Time Window"})," under\ngrafen og drar p\xe5 pila som er nederst p\xe5 grafen. Tidspunktet blir\navmerket med gr\xf8nn farge i grafen"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"list-flows-vs-stat-topn",children:"List Flows vs. Stat TopN"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"List Flows"})," viser hele flows, og gj\xf8r ingen\nsortering basert p\xe5 statistikk. Her vil det kun vises de antall\nflows man har valgt som f\xf8rst stemmer med det utvalget man har\nvalgt. Man kan ogs\xe5 aggregere data basert p\xe5 de valgene man gj\xf8r."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Stat TopN"})," viser statistisk analyse og\nsorterer output basert p\xe5 valgene du gj\xf8r."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Stat Any IP Address order by bytes"})," vil\nf.eks gi deg en liste over de som har overf\xf8rt mest data i valgt\ntidsperiode."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"s\xf8k-i-netflow-dataene",children:"S\xf8k i netflow dataene"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"tcpdump-aktig filter format"}),"\n",(0,s.jsxs)(n.li,{children:["Eks.:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"host 158.38.x.y"})," (Filtrerer ut all trafikk til/fra host\n158.38.x.y)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src host 158.38.w.x and dst host 158.38.y.z"})," (Filtrerer ut all\ntrafikk mellom disse to hostene der trafikken kommer fra\n158.38.w.x og sendes til 158.38.y.z, src=source,\ndst=destination)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"proto tcp and src host 158.38.x.y"})," (Filtrerer ut all tcp trafikk\nsendt ifra 158.38.x.y)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src host 158.38.w.x or host 158.38.y.z"})," (Filtrerer ut trafikk fra\nhost 158.38.x.y eller all trafikk til/fra host 158.38.y.z)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src host 158.38.x.y and src port 22"})," (Filtrerer ut all trafikk\nfra host 158.38.x.y der trafikken er sendt ifra port 22(ssh))"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src port gt 80 and src port lt 123"})," (Filtrerer ut trafikk sendt\nifra portene mellom 80 og 123, gt= greater than, lt=less than)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src port 80 and not host 158.38.x.y"})," (Filtrerer ut trafikk sendt\nifra port 80 og som ikke er sendt til/fra host 158.38.x.y)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"src net 158.38.x.0/24"})," (Filtrerer ut trafikk sendt ifra nettet\n158.38.x.0/24)"]}),"\n",(0,s.jsxs)(n.li,{children:["Ett annet triks er \xe5 angi hvilke interface man skal plukke ut\ntrafikk ifra. Eks. ",(0,s.jsx)(n.code,{children:"in if 24"}),", vil kun plukke ut trafikk som\nkommer inn p\xe5 interface 24. Hvilket nummer et interface har p\xe5\net cisco-ruter finner man ut med kommandoen ",(0,s.jsx)(n.code,{children:"show snmp mib ifmib ifindex"}),". (Husk at netflow kun eksporteres fra trafikk inn p\xe5 et\ninterface. Trafikk ut p\xe5 et interface vil ikke bli eksportert,\nog m\xe5 f\xf8lgelig filtreres ut fra det interfacet hvor denne\ntrafikken kommer inn.) Skriver man derfor ",(0,s.jsx)(n.code,{children:"out if 24"})," vil dette da\nbety det samme som, gi meg all trafikk ",(0,s.jsx)(n.strong,{children:"inn"})," p\xe5 alle interface\nbortsett fra 24."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ferdigdefinerte-filter-man-bruker-ofte",children:"Ferdigdefinerte filter man bruker ofte"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Disse kan lagres som filer i filsystemet under katalogen\n",(0,s.jsx)(n.code,{children:"/var/lib/nfsen/filters"})]}),"\n",(0,s.jsx)(n.li,{children:"Vanlig filtersyntaks brukes i disse filene ogs\xe5."}),"\n",(0,s.jsx)(n.li,{children:"Ferdigdefinerte filtre velges under boksen man skriver inn filtre\nder det vanligvis st\xe5r and none"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"lage-profiler",children:"Lage profiler"}),"\n",(0,s.jsxs)(n.p,{children:["For s\xf8k man gj\xf8r ofte og som man vil f\xf8lge med grafisk over tid kan det\nv\xe6re lurt \xe5 lage egne profiler som har oversikt over denne trafikken.\nDersom man velger Real Profile lager dette egne flow-filer p\xe5\nfilsystemet (som ogs\xe5 tar plass). Dersom du lager en profil som er langt\ntilbake i tid, s\xe5 kan det ta lang tid for nfsen \xe5 lage grunnlagsdata for\nhele perioden. Dersom du lager en Shadow Profile, lager den ikke egne\nflow-filer p\xe5 filsystemet, men den bruker bare datagrunnlaget som\nallerede ligger der. Du vil likevel f\xe5 tegnet egne grafiske profiler for\ndataene du vil filtrere ut. Bruk av channels gj\xf8r at du kan skreddersy\ngrafene og fargene etter dine behov. Se ",(0,s.jsx)(n.a,{href:"http://nfsen.sourceforge.net/",children:"dokumentasjon p\xe5\nsourceforge"})," for detaljer."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Profile st\xe5r \xf8verst i h\xf8yre hj\xf8rne."}),"\n",(0,s.jsx)(n.li,{children:'Normalt vises Profile "live"'}),"\n",(0,s.jsxs)(n.li,{children:["Velg New profile","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"lag en profil som plukker ut all trafikk av en gitt type, basert\np\xe5 filtre du definerer."}),"\n",(0,s.jsx)(n.li,{children:"Navngi denne rapporten."}),"\n",(0,s.jsx)(n.li,{children:"Velg en kilde"}),"\n",(0,s.jsx)(n.li,{children:"Basert p\xe5 hvor mye data som skal prosesseres tar det en hvis tid\n\xe5 prosessere og lage denne profilen"}),"\n",(0,s.jsx)(n.li,{children:"Vis profilen etterp\xe5 ved \xe5 velge denne fra selected profile"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"alert",children:"Alert"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"I nyeste utgave av nfsen kan man lage terskelbaserte alarmer."}),"\n",(0,s.jsxs)(n.li,{children:["Dokumentasjonen p\xe5 ",(0,s.jsx)(n.a,{href:"http://nfsen.sourceforge.net/#mozTocId859236",children:"nfsen sine\nsider"})," sier viser\ndetaljer for hvordan man oppretter alarmer. OBS: Husk \xe5 sette/endre\nfilteret for alarmen dersom du \xf8nsker \xe5 teste dette. Default st\xe5r\nden p\xe5 'not any' som ikke vil gi deg noe trafikk!"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"feils\xf8king-av-nfsen",children:"Feils\xf8king av nfsen"}),"\n",(0,s.jsx)(n.p,{children:"Dersom du har problemer med nfsen er det ett par ting man kan sjekke\nfoer man melder feil."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"G\xe5r alle n\xf8dvendige prosesser?\n1 nfsend og 1 nfcapd per kilde(netflow-eksport\xf8r) Dersom ikke\nrestart nfsen."}),"\n",(0,s.jsxs)(n.li,{children:["Mottar du flows fra kilde?\nBruk gjerne tcpdump for \xe5 sjekke om du mottar flows. F.eks ",(0,s.jsx)(n.code,{children:"tcpdump port 2055"}),". Hvilken port du lytter p\xe5 kan du finne i\n",(0,s.jsx)(n.code,{children:"/etc/nfsen/nfsen.conf.local"})," under sources. Dersom ikke, sjekk\nruterconfig og access-lister."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"command-line-tools",children:"Command line tools"}),"\n",(0,s.jsx)(n.p,{children:"En del kjekke command line tools er installert p\xe5 verkt\xf8ykassene. Her\nf\xf8lger en liste og kort omtale:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ping"})," og ",(0,s.jsx)(n.code,{children:"traceroute"})," (trenger vel ingen kommentar)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"snmpwalk"})," (m.fl.)\nBrukes til \xe5 polle utstyr med snmp, kjekt for NAV feils\xf8king."]}),"\n",(0,s.jsx)(n.p,{children:"Typisk syntaks:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"snmpwalk -v2c -c <community> <ip> <oid>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Eks:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"snmpwalk -v2c -c public 10.10.10.1 ifinoctet\n"})}),"\n",(0,s.jsx)(n.p,{children:"(henter inoctet tellere fra boks 10.10.10.1)"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"nmap"}),"\nBrukes til scanne en host/sjekke om en port/sett av porter er \xe5pne."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hobbitxymon",children:"Hobbit/Xymon"}),"\n",(0,s.jsxs)(n.p,{children:["Se egen side for ",(0,s.jsx)(n.a,{href:"/docs/nettadministrasjon/xymon",children:"dokumentasjon av Xymon-integrasjonen p\xe5 verkt\xf8ykassen"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"firewall-builder-fwbuilder",children:"Firewall Builder (fwbuilder)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"fwbuilder",children:"Brukerdokumentasjon for Firewall Builder foreligger p\xe5 en egen\nside"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(k,{...e})}):k(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>d});var s=r(6540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);