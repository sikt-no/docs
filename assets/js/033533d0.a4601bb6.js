"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[555],{7565:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>d,toc:()=>o});var t=s(5893),i=s(1151);const l={description:"Hjelp til oppsett av Felles Studentsystem sitt FS-API.",title:"Felles Studentsystem - FS-API"},r="Felles Studentsystem - FS-API",d={id:"datadeling/teknisk-plattform/api/fs",title:"Felles Studentsystem - FS-API",description:"Hjelp til oppsett av Felles Studentsystem sitt FS-API.",source:"@site/docs/datadeling/teknisk-plattform/api/fs.md",sourceDirName:"datadeling/teknisk-plattform/api",slug:"/datadeling/teknisk-plattform/api/fs",permalink:"/docs/datadeling/teknisk-plattform/api/fs",draft:!1,unlisted:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/datadeling/teknisk-plattform/api/fs.md",tags:[],version:"current",lastUpdatedAt:1704456721,formattedLastUpdatedAt:"Jan 5, 2024",frontMatter:{description:"Hjelp til oppsett av Felles Studentsystem sitt FS-API.",title:"Felles Studentsystem - FS-API"},sidebar:"datadeling",previous:{title:"Digdir Folkeregisteret og KRR",permalink:"/docs/datadeling/teknisk-plattform/api/digdir"},next:{title:"Inspera",permalink:"/docs/datadeling/teknisk-plattform/api/inspera"}},a={},o=[{value:"Om API-et",id:"om-api-et",level:2},{value:"Milj\xf8er",id:"milj\xf8er",level:2},{value:"Oppsett av FS-API",id:"oppsett-av-fs-api",level:2},{value:"Tilgang til FS-API",id:"tilgang-til-fs-api",level:3},{value:"Konfigurasjon av FS-API i Gravitee",id:"konfigurasjon-av-fs-api-i-gravitee",level:3},{value:"Test av API-et",id:"test-av-api-et",level:3},{value:"Grunnoppsett for FS Gemini API",id:"grunnoppsett-for-fs-gemini-api",level:3},{value:"Konfigurasjon av meldingsk\xf8",id:"konfigurasjon-av-meldingsk\xf8",level:2},{value:"Opprette applikasjonen i selvbetjeningsportalen",id:"opprette-applikasjonen-i-selvbetjeningsportalen",level:3},{value:"Konfigurasjon av meldingsk\xf8 i FS",id:"konfigurasjon-av-meldingsk\xf8-i-fs",level:3},{value:"Test av meldingsk\xf8oppsett",id:"test-av-meldingsk\xf8oppsett",level:3}];function p(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"felles-studentsystem---fs-api",children:"Felles Studentsystem - FS-API"}),"\n",(0,t.jsx)(n.p,{children:"Hjelp til oppsett av Felles Studentsystem sitt FS-API."}),"\n",(0,t.jsx)(n.h2,{id:"om-api-et",children:"Om API-et"}),"\n",(0,t.jsxs)(n.p,{children:["Felles Studentsystem er en fellestjeneste i sektoren. Hver institusjon har sin instans, men FS leverer et felles REST API for alle institusjoner, der hver institusjon f\xe5r ut ",(0,t.jsx)(n.strong,{children:"sine studiedata"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Se ",(0,t.jsx)(n.a,{href:"https://www.fellesstudentsystem.no/",children:"fellesstudentsystem.no"})," for mer informasjon om tjenesten. Se mer ",(0,t.jsx)(n.a,{href:"https://www.fellesstudentsystem.no/dokumentasjon/brukerdok/fswebservice/fs-api/",children:"detaljer om FS API"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"milj\xf8er",children:"Milj\xf8er"}),"\n",(0,t.jsx)(n.p,{children:"Det finnes tre varianter av FS-API:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Milj\xf8"}),(0,t.jsx)(n.th,{children:"URL"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Produksjon"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://api.fellesstudentsystem.no/",children:"https://api.fellesstudentsystem.no/"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Test/Demo"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://api-test.fellesstudentsystem.no/",children:"https://api-test.fellesstudentsystem.no/"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Utvikling"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://api-utv.fellesstudentsystem.no/",children:"https://api-utv.fellesstudentsystem.no/"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Bes\xf8k ",(0,t.jsx)(n.code,{children:"/version"})," for \xe5 se hvilken versjon milj\xf8et kj\xf8rer."]}),"\n",(0,t.jsx)(n.h2,{id:"oppsett-av-fs-api",children:"Oppsett av FS-API"}),"\n",(0,t.jsx)(n.h3,{id:"tilgang-til-fs-api",children:"Tilgang til FS-API"}),"\n",(0,t.jsx)(n.p,{children:"Du som er lokal tjenesteeier for FS m\xe5 be FS sentralt om tilgang til FS-API for din institusjon."}),"\n",(0,t.jsxs)(n.p,{children:["Ta kontakt med ",(0,t.jsx)(n.a,{href:"mailto:fs-support@sikt.no",children:"fs-support@sikt.no"})," med \xf8nske om \xe5 f\xe5 opprettet et brukernavn og passord til FS-API for databasen det er aktuelt \xe5 sette opp tilgang til (prod/demo). ",(0,t.jsx)(n.em,{children:"apigateway"})," er et forslag til et beskrivende brukernavn. Denne b\xf8r ha lesetilgang til alle ressurser. Ved behov kan skrivetilganger legges p\xe5 senere."]}),"\n",(0,t.jsx)(n.h3,{id:"konfigurasjon-av-fs-api-i-gravitee",children:"Konfigurasjon av FS-API i Gravitee"}),"\n",(0,t.jsxs)(n.p,{children:["Se den ",(0,t.jsx)(n.a,{href:"/docs/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api",children:"generelle veilederen"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["General: S\xf8rg for at ",(0,t.jsx)(n.em,{children:"context-path"})," tydelig peker p\xe5 milj\xf8et du setter opp API-et for, f.eks. ",(0,t.jsx)(n.code,{children:"/fs-api-test"})," eller ",(0,t.jsx)(n.code,{children:"/fs-api-prod"})]}),"\n",(0,t.jsx)(n.li,{children:"General: Sett navn og beskrivelse"}),"\n",(0,t.jsxs)(n.li,{children:["General: Sett ",(0,t.jsx)(n.em,{children:"version"})," til 1"]}),"\n",(0,t.jsxs)(n.li,{children:["Gateway: Finn URL i milj\xf8oversikten og fyll den inn under ",(0,t.jsx)(n.em,{children:"backend"})]}),"\n",(0,t.jsx)(n.li,{children:"Plan: Vi lager en plan som gir full lesetilgang. Senere kan det lages mer nedl\xe5ste planer."}),"\n",(0,t.jsxs)(n.li,{children:["Plan: Sett f.eks. navnet til ",(0,t.jsx)(n.em,{children:"Full lesetilgang"})]}),"\n",(0,t.jsxs)(n.li,{children:["Plan: Velg ",(0,t.jsx)(n.em,{children:"Security type: API key"})]}),"\n",(0,t.jsxs)(n.li,{children:["Plan: ",(0,t.jsx)(n.em,{children:"Auto validate subscription"})," skal ",(0,t.jsx)(n.strong,{children:"IKKE"})," v\xe6re p\xe5"]}),"\n",(0,t.jsxs)(n.li,{children:["Plan: La ",(0,t.jsx)(n.em,{children:"Characteristics"}),", ",(0,t.jsx)(n.em,{children:"rate limit"})," og ",(0,t.jsx)(n.em,{children:"quota"})," v\xe6re tomme"]}),"\n",(0,t.jsxs)(n.li,{children:["Plan: Legg til ",(0,t.jsx)(n.em,{children:"Ant pattern"})," ",(0,t.jsx)(n.code,{children:"/**"})," og ",(0,t.jsx)(n.em,{children:"method"})," ",(0,t.jsx)(n.code,{children:"GET"})]}),"\n",(0,t.jsx)(n.li,{children:"Doc: Hopp over dette steget. Dokumentasjon kan lastes opp senere."}),"\n",(0,t.jsxs)(n.li,{children:["Deployment: Velg ",(0,t.jsx)(n.em,{children:"Create and start the API"})]}),"\n",(0,t.jsx)(n.li,{children:"Konfigurer API-et til \xe5 autentisere med brukernavnet og passordet fra steg 1"}),"\n",(0,t.jsxs)(n.li,{children:["F\xf8lg ",(0,t.jsx)(n.a,{href:"/docs/datadeling/veiledere/api-manager/backend",children:"veiledningen for konfigurering av backend"})]}),"\n",(0,t.jsxs)(n.li,{children:["FS-API forventer ",(0,t.jsx)(n.em,{children:"basic access authentication"}),", alts\xe5 skal det settes en ",(0,t.jsx)(n.em,{children:"Authorization"}),"-header med en verdi som vil minne om ",(0,t.jsx)(n.code,{children:"Basic YnJ1a2VybmF2bjpoZWlwYWFkZWc"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"test-av-api-et",children:"Test av API-et"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["F\xf8lg ",(0,t.jsx)(n.a,{href:"/docs/datadeling/veiledere/api-manager/api-manager-be-om-tilgang",children:"veiledningen for \xe5 f\xe5 tilgang til et API"})," og godkjenn selv tilgangen"]}),"\n",(0,t.jsxs)(n.li,{children:["Finn API-n\xf8kkelen som gir tilgang til FS-API og riktig ",(0,t.jsx)(n.em,{children:"context-path"})]}),"\n",(0,t.jsxs)(n.li,{children:["Sjekk at du f\xe5r hentet ut en liste over emner:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'curl --include -H "X-Gravitee-Api-Key: DIN-N\xd8KKEL" https://gw-INSTANS.intark.uh-it.no/CONTEXT-PATH/emner/\n'})}),"\n","Bytt ut ",(0,t.jsx)(n.em,{children:"DIN-N\xd8KKEL"}),", ",(0,t.jsx)(n.em,{children:"INSTANS"})," og ",(0,t.jsx)(n.em,{children:"CONTEXT-PATH"}),'.\nOm du f\xe5r tilbake noe som starter med "HTTP 200" og en JSON-formatert liste med ulike emner, fungerer alt som det skal.']}),"\n",(0,t.jsxs)(n.li,{children:["Sjekk at API-et krever autentisering:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'curl --include -H "X-Gravitee-Api-Key: DIN-N\xd8KKEL" https://gw-INSTANS.intark.uh-it.no/CONTEXT-PATH/emner/\n'})}),"\n","Dette burde gi ",(0,t.jsx)(n.code,{children:"HTTP 401"})," og ",(0,t.jsx)(n.code,{children:'{"message":"Unauthorized","http_status_code":401}'}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"grunnoppsett-for-fs-gemini-api",children:"Grunnoppsett for FS Gemini API"}),"\n",(0,t.jsxs)(n.p,{children:["Dette er et grunnoppsett mot FS Gemini API'et. Oppsettet kommer med en plan til bruk sammen med ServiceNow. Det er et oppsett satt opp mot ",(0,t.jsx)(n.a,{target:"_blank",href:s(2902).Z+"",children:"produksjonsmilj\xf8et"}),", samt et oppsett satt opp mot ",(0,t.jsx)(n.a,{target:"_blank",href:s(779).Z+"",children:"utviklingsmilj\xf8et"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"F\xf8r import:"}),"\n",(0,t.jsx)(n.em,{children:"Context path"})," er satt til ",(0,t.jsx)(n.code,{children:"/fs/gemini"})," og ",(0,t.jsx)(n.code,{children:"/preview/fs/gemini"}),". Endre eventuelt denne om man benytter en annen ",(0,t.jsx)(n.em,{children:"context path"})," struktur."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Etter import:"}),"\nOppsettet bruker ",(0,t.jsx)(n.em,{children:"API properties"})," til \xe5 hente brukernavn og passord, og dette m\xe5 derfor settes etter import av oppsettet:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["G\xe5 til ",(0,t.jsx)(n.em,{children:"Design"})," p\xe5 API-menyen"]}),"\n",(0,t.jsxs)(n.li,{children:["G\xe5 videre til ",(0,t.jsx)(n.em,{children:"PROPERTIES"})," i menyen oppe til h\xf8yre"]}),"\n",(0,t.jsxs)(n.li,{children:["Legg inn bas64 encoded string av ",(0,t.jsx)(n.code,{children:"bruker:passord"})," i verdifeltet til ",(0,t.jsx)(n.code,{children:"fs_fsapi_api_key"})]}),"\n",(0,t.jsxs)(n.li,{children:["Endre til ",(0,t.jsx)(n.em,{children:"encrypted"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Husk \xe5 lagre"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"konfigurasjon-av-meldingsk\xf8",children:"Konfigurasjon av meldingsk\xf8"}),"\n",(0,t.jsxs)(n.p,{children:["Les f\xf8rst om ",(0,t.jsx)(n.a,{href:"/docs/datadeling/teknisk-plattform/rabbitmq",children:"RabbitMQ"})," og (selvbetjeningsl\xf8sningen for RabbitMQ)[/docs/datadeling/teknisk-plattform/brom]."]}),"\n",(0,t.jsxs)(n.p,{children:["FS har mer ",(0,t.jsx)(n.a,{href:"https://www.fellesstudentsystem.no/dokumentasjon/brukerdok/fswebservice/fs-api/meldingsko.html",children:"teknisk informasjon"})," om sin st\xf8tte for meldingsk\xf8er. Spesielt relevant er avsnittet om ",(0,t.jsx)(n.em,{children:"Integrasjonspunkter"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"opprette-applikasjonen-i-selvbetjeningsportalen",children:"Opprette applikasjonen i selvbetjeningsportalen"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Se ",(0,t.jsx)(n.a,{href:"/docs/datadeling/veiledere/meldingsk%C3%B8/opprett-tjeneste",children:"veiledningen for \xe5 opprette en applikasjon i selvbetjeningsl\xf8sningen"})," ved behov."]}),"\n",(0,t.jsxs)(n.li,{children:["Bruk ",(0,t.jsx)(n.strong,{children:"FS"})," som navn uansett hvilket milj\xf8 (prod/test) du skal sette opp. Milj\xf8typen blir uansett automatisk lagt p\xe5 som en del av navnet. Et ",(0,t.jsx)(n.em,{children:"testmilj\xf8"})," med navn ",(0,t.jsx)(n.em,{children:"FS"})," f\xe5r f.eks. identifikatoren ",(0,t.jsx)(n.em,{children:"system-test-fs"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Under ",(0,t.jsx)(n.em,{children:"Publisering"}),", velg ",(0,t.jsx)(n.em,{children:"Registrering notfikikasjonskilde"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Som ",(0,t.jsx)(n.em,{children:"Lenke til side med dokumentasjon"}),", bruk f.eks. ",(0,t.jsx)(n.a,{href:"https://www.fellesstudentsystem.no/dokumentasjon/brukerdok/fswebservice/fs-api/meldingsko.html",children:"denne lenka"})]}),"\n",(0,t.jsx)(n.li,{children:"Oppgi en sentral e-postadresse til IT hos egen institusjon"}),"\n",(0,t.jsx)(n.li,{children:"Alle andre felt kan st\xe5 tomme"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Under fanen ",(0,t.jsx)(n.em,{children:"Applikasjonsinfo"})," finnes n\xe5 brukernavn og passord"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"konfigurasjon-av-meldingsk\xf8-i-fs",children:"Konfigurasjon av meldingsk\xf8 i FS"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\xc5pne FS-klienten mot milj\xf8et det skal settes opp meldingsk\xf8 mot"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Finn menyvalget ",(0,t.jsx)(n.em,{children:"WS Tjeneste"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Opprett en tjenestekode kalt ",(0,t.jsx)(n.em,{children:"MQ"})," med:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["URL: ",(0,t.jsx)(n.code,{children:"amqps:mq-INSTANS.intark.uh-it.no port:5671 vh:system-MILJ\xd8-fs ex:outgoing_system-test-fs"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"INSTANS"})," erstattes med din institusjonskode og ",(0,t.jsx)(n.em,{children:"system-MILJ\xd8-fs"})," matcher navnet p\xe5 tjenesten som er opprettet i selvbetjeningsportalen."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Brukernavn og passord fra selvbetjeningsportalen"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Opprett en tjenestekode kalt ",(0,t.jsx)(n.em,{children:"WSINTERN"})," med:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["URL: ",(0,t.jsx)(n.code,{children:"https://api.fellesstudentsystem.no"})," for produksjon, eller"]}),"\n",(0,t.jsxs)(n.li,{children:["URL: ",(0,t.jsx)(n.code,{children:"https://fsapi-test.uio.no"})," for test"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Denne er lik URL-en til API-et hos FS, uten skr\xe5strek p\xe5 slutten."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ta kontakt med ",(0,t.jsx)(n.a,{href:"mailto:fs-support@sikt.no",children:"fs-support@sikt.no"})," for videre konfigurasjon p\xe5 FS sin side."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"test-av-meldingsk\xf8oppsett",children:"Test av meldingsk\xf8oppsett"}),"\n",(0,t.jsx)(n.p,{children:"For \xe5 sjekke at meldinger kommer gjennom, b\xf8r det eksisterende en applikasjon som abonnerer p\xe5 FS sine meldinger via selvbetjeningsl\xf8sningen. Abonnentet m\xe5 v\xe6re godkjent av en av de som st\xe5r som eiere av FS i selvbetjeningsl\xf8sningen."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"G\xe5 til applikasjonen som har abonnert p\xe5 FS-meldinger"}),"\n",(0,t.jsxs)(n.li,{children:["Verifiser at ",(0,t.jsx)(n.em,{children:"system-MILJ\xd8-fs"})," ligger under ",(0,t.jsx)(n.em,{children:"Godkjente abonnement"})," under ",(0,t.jsx)(n.em,{children:"Abonnere"})]}),"\n",(0,t.jsxs)(n.li,{children:["F\xf8lg lenka til ",(0,t.jsx)(n.em,{children:"RabbitMQ sitt brukergrensesnitt"})," under ",(0,t.jsx)(n.em,{children:"Applikasjonsinfo"})]}),"\n",(0,t.jsx)(n.li,{children:"Logg p\xe5 med applikasjonens brukernavn og passord"}),"\n",(0,t.jsxs)(n.li,{children:["Ved nedtrekksmenyen ",(0,t.jsx)(n.em,{children:"Virtual host"})," \xf8verst til h\xf8yre, velg ",(0,t.jsx)(n.em,{children:"system-MILJ\xd8-fs"})]}),"\n",(0,t.jsxs)(n.li,{children:["Finn k\xf8en med navn ",(0,t.jsx)(n.em,{children:"from_system-MILJ\xd8-fs"}),". Under ",(0,t.jsx)(n.em,{children:"Messages"})," kan man se antall meldinger som ligger i k\xf8. Denne skal \xf8ke om det gj\xf8res endringer i FS, med noe forsinkelse (0-5 minutter)."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},779:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/files/fs-gemini-preview-a20b8f7b3f4640af577411d5a3e3452d.json"},2902:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/files/fs-gemini-prod-7651f41db455e91c30ee996fd1a14e88.json"},1151:(e,n,s)=>{s.d(n,{Z:()=>d,a:()=>r});var t=s(7294);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);