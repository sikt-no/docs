"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[9084],{3706:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var s=r(5893),t=r(1151);const i={slug:"/datadeling/god-praksis/notifikasjonsdesign/",title:"Hvordan designe dine notifikasjoner"},o=void 0,d={id:"datadeling/god-praksis/notifikasjonsdesign",title:"Hvordan designe dine notifikasjoner",description:'Med "notifikasjoner" mener vi her "tynne meldinger" som g\xe5r via en meldingsk\xf8',source:"@site/docs/datadeling/god-praksis/notifikasjonsdesign.md",sourceDirName:"datadeling/god-praksis",slug:"/datadeling/god-praksis/notifikasjonsdesign/",permalink:"/docs/datadeling/god-praksis/notifikasjonsdesign/",draft:!1,unlisted:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/datadeling/god-praksis/notifikasjonsdesign.md",tags:[],version:"current",lastUpdatedAt:1706020065,formattedLastUpdatedAt:"Jan 23, 2024",frontMatter:{slug:"/datadeling/god-praksis/notifikasjonsdesign/",title:"Hvordan designe dine notifikasjoner"},sidebar:"datadeling",previous:{title:"Hendelsesbasert provisjonering",permalink:"/docs/datadeling/god-praksis/integrasjonsmonster/hendelsesbasert/"},next:{title:"Kode som bruker IntArk",permalink:"/docs/datadeling/kode"}},a={},l=[{value:"Anbefalt standard",id:"anbefalt-standard",level:2},{value:"Hva b\xf8r en notifikasjon inneholde?",id:"hva-b\xf8r-en-notifikasjon-inneholde",level:2},{value:"Framtidige hendelser",id:"framtidige-hendelser",level:3},{value:"Eksempler p\xe5 notifikasjoner",id:"eksempler-p\xe5-notifikasjoner",level:2},{value:"Eksempler p\xe5 tjenester",id:"eksempler-p\xe5-tjenester",level:2},{value:"Hvorfor tynne meldinger?",id:"hvorfor-tynne-meldinger",level:2},{value:"Fallgruver",id:"fallgruver",level:2},{value:"Se ogs\xe5",id:"se-ogs\xe5",level:2}];function k(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:['Med "notifikasjoner" mener vi her "tynne meldinger" som g\xe5r via en meldingsk\xf8\neller meldingsformidler. Se mer i\n',(0,s.jsx)(n.a,{href:"/docs/datadeling/begreper/notifikasjon",children:"begrepsoversikten"}),". Disse\nnotifikasjonene brukes i hovedsak i integrasjonsm\xf8nsteret ",(0,s.jsx)(n.a,{href:"/docs/datadeling/god-praksis/integrasjonsmonster/hendelsesbasert",children:"hendelsesbasert\nprovisjonering"}),"."]}),"\n",(0,s.jsx)(n.p,{children:'En notifikasjon forteller deg bare at "noe har skjedd", p\xe5 et maskinlesbart\nformat. Den inneholder ogs\xe5 nok detaljer til at du kan vite hvor du kan f\xe5 tak\ni mer informasjon.'}),"\n",(0,s.jsx)(n.h2,{id:"anbefalt-standard",children:"Anbefalt standard"}),"\n",(0,s.jsxs)(n.p,{children:["Hver tilbyder st\xe5r selv fritt til \xe5 velge format p\xe5 sine notifikasjoner, men vi\nanbefaler standarden ",(0,s.jsx)(n.a,{href:"https://cloudevents.io/",children:"CloudEvent"}),". Dette fordi det er\nen system- og leverand\xf8ruavhengig standard som kan brukes av alle, og\ninneholder mange av de samme slutningene som vi har erfart."]}),"\n",(0,s.jsxs)(n.p,{children:["Notifikasjoner b\xf8r ogs\xe5 f\xf8lge de samme f\xf8ringene som ved ",(0,s.jsx)(n.a,{href:"/docs/datadeling/god-praksis/api-design",children:"utforming av\nAPI"}),". Vi frar\xe5der \xe5 lage egne\nnotifikasjoner som er skreddersydde for spesifikke konsumenter, men lage\nnotifikasjoner som er generelle og standardiserte nok til \xe5 kunne brukes av\nalle konsumenter."]}),"\n",(0,s.jsx)(n.h2,{id:"hva-b\xf8r-en-notifikasjon-inneholde",children:"Hva b\xf8r en notifikasjon inneholde?"}),"\n",(0,s.jsxs)(n.p,{children:["Meningen med en notifikasjon er \xe5 fortelle konsumenter at ",(0,s.jsx)(n.em,{children:"noe har skjedd"})," i\nkildesystemet, slik at de kan vurdere om de skal gj\xf8re noe. Ved at tilbyder\nselv sier i fra, slipper tilbyder at hver enkelt konsument jevnlig sp\xf8r etter\nom noe nytt har skjedd siden sist."]}),"\n",(0,s.jsx)(n.p,{children:"Notifikasjonen trenger som minimum \xe5 fortelle konsumentene:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hvilket system, instans eller API dette gjelder. S\xe5 konsumenten vet hvor data\nskal hentes fra."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hvilket endepunkt, entitet eller objekt endringen gjelder for."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Det er ogs\xe5 en fordel om notifikasjonen inneholder:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hvilken type endring det er snakk om. Er det for eksempel oppretting, endring\neller sletting av en entitet?"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hvilket tidspunkt gjelder endringen for."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hvilke attributter har blitt endret."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Dette er optimalisering. Mer metadata om en endring gj\xf8r det enklere for\nkonsumenter \xe5 filtrere bort endringer som er irrelevante for de. Dette skaper\nigjen mindre last p\xe5 produsenten, siden f\xe6rre konsumenter trenger \xe5 sl\xe5 opp for\n\xe5 sjekke."}),"\n",(0,s.jsx)(n.h3,{id:"framtidige-hendelser",children:"Framtidige hendelser"}),"\n",(0,s.jsx)(n.p,{children:"I noen tilfeller vil en endring ikke v\xe6re gyldig f\xf8r p\xe5 et senere tidspunkt.\nFor eksempel at en saksbehandler oppretter en ny ansatt, men som ikke skal\nstarte f\xf8r om to uker."}),"\n",(0,s.jsxs)(n.p,{children:["Tilbyderen sender en notifikasjon p\xe5 tidspunktet registreringen skjedde, i\ndette tilfellet n\xe5r den ansatte ble registrert. Tilbyderen har ",(0,s.jsx)(n.strong,{children:"ikke"})," ansvar\nfor \xe5 sende ut en ny notifikasjon p\xe5 tidspunktet endringen trer i kraft, selv\nom tilbyder gjerne m\xe5 gj\xf8re det. Det er konsumenten som er ansvarlig for \xe5\nreagere p\xe5 riktig tidspunkt, ikke tilbyder."]}),"\n",(0,s.jsx)(n.p,{children:"Bakgrunnen for ansvarsfordelingen er at tidspunkt for reaksjon er ulik hos\nkonsumentene - det er forretningslogikk som ikke b\xf8r ligge hos tilbyder. I\neksempelet med nyansatte kan for eksempel personpresentasjonsl\xf8sningen trenge \xe5\npublisere personen samme dag som startdato i avtalen, mens IGA vil m\xe5tte\nopprette en brukerkonto kanskje fem dager f\xf8r startdato. Andre konsumenter\ntrenger kanskje ikke \xe5 forholde seg til startdato i det hele tatt, men\nprovisjonere den nyansatte umiddelbart."}),"\n",(0,s.jsx)(n.h2,{id:"eksempler-p\xe5-notifikasjoner",children:"Eksempler p\xe5 notifikasjoner"}),"\n",(0,s.jsx)(n.p,{children:"Eksempel p\xe5 en notifikasjon som bruker CloudEvents-standarden:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'    {\n        "specversion" : "1.0",\n        "type" : "no.uio.cerebrum.account.create",\n        "source" : "https://cerebrum-uio.uio.no",\n        "subject" : "https://cerebrum-uio.uio.no/api/v2/accounts/123456",\n        "id" : "4d3559ec67504aaba65d40b0363faad8",\n        "time" : "2020-10-29T09:01:14Z",\n    }\n'})}),"\n",(0,s.jsxs)(n.p,{children:['Dette eksempelet er en typisk "tynn melding", som forteller deg at en\nbrukerkonto har blitt opprettet, men ikke s\xe5 mye annet. For \xe5 vite mer om\nbrukerkontoen m\xe5 du snakke med API-et som ',(0,s.jsx)(n.code,{children:"subject"})," peker til."]}),"\n",(0,s.jsx)(n.p,{children:"Eksempel p\xe5 en mye enklere notifikasjon:"}),"\n",(0,s.jsx)(n.p,{children:"accounts/123456"}),"\n",(0,s.jsx)(n.p,{children:"For enkle tjenester kan dette v\xe6re godt nok. De fleste tilbydere er likevel\ntjent med \xe5 eksponere mer detaljer, spesielt for \xe5 redusere antal sp\xf8rringer\nfra konsumentene."}),"\n",(0,s.jsx)(n.h2,{id:"eksempler-p\xe5-tjenester",children:"Eksempler p\xe5 tjenester"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"NTNU sin OrgReg gir ut notifikasjoner som f\xf8lger CloudEvents-standarden."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"IGA-l\xf8sninger, som Rapid Identity og Cerebrum, gir ut notifikasjoner."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Se gjerne i institusjonenes API-kataloger for detaljer om notifikasjoner fra de\nenkelte tjenestene."}),"\n",(0,s.jsx)(n.h2,{id:"hvorfor-tynne-meldinger",children:"Hvorfor tynne meldinger?"}),"\n",(0,s.jsx)(n.p,{children:"Tynne meldinger gir en enklere flyt for provisjoneringsl\xf8sninger, som har fokus\np\xe5 status her og n\xe5. Meldingene er tynne for \xe5 redusere mengden\npersonopplysninger, og unng\xe5r at konsumentene behandler det som kildedata.\nMeldinger kan bli forsinket, for eksempel at de ligger p\xe5 vent i meldingsk\xf8en\nmens konsumenten er nede, og vil fort kunne inneholde utdaterte data."}),"\n",(0,s.jsx)(n.h2,{id:"fallgruver",children:"Fallgruver"}),"\n",(0,s.jsx)(n.p,{children:"Notifikasjonene gir bare informasjon om at noe har skjedd, og ikke hva som har\nskjedd. Ikke se p\xe5 notifikasjoner som kildedata - kildedata m\xe5 du f\xe5 fra\ntilbyders API. Faren med \xe5 bruke innholdet i notifikasjoner som kildedata er at\ndu kan ende opp med utdaterte data - for eksempel hvis konsument ikke har\nhentet ut nye notifikasjoner fra sin meldingsk\xf8 p\xe5 en dag."}),"\n",(0,s.jsx)(n.p,{children:"API og notifikasjoner b\xf8r vere i synk, dvs. snakke om de samme entitetene.\nGj\xf8res dette ulikt blir det fort komplisert hos alle konsumenter som m\xe5 tolke\nog oversette."}),"\n",(0,s.jsx)(n.p,{children:"API-et b\xf8r tilby data konsistent. Hvis en entitet finnes, b\xf8r det eksponeres i\nAPI-et uavhengig av tidspunktet sp\xf8rringen skjer p\xe5. Hvis data for eksempel\nblir begrenset f\xf8r et tidspunkt, og etter en viss tid, er det stor fare for at\ntilbyder utf\xf8rer en forretningslogikk som b\xf8r ligge hos konsumentene. Plutselig\ndukker det opp en konsument med behov for data p\xe5 et enda senere tidspunkt, som\nda plutselig ikke blir mulig."}),"\n",(0,s.jsx)(n.h2,{id:"se-ogs\xe5",children:"Se ogs\xe5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/datadeling/god-praksis/integrasjonsmonster/hendelsesbasert",children:"Integrasjonsm\xf8nsteret hendelsesbasert\nprovisjonering"}),",\nsom bruker notifikasjoner."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/datadeling/teknisk-plattform/brom",children:"Selvbetjening for RabbitMQ"}),", som er\nder du administrerer hvem som har tilgang til hvilke notifikasjoner."]}),"\n"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(k,{...e})}):k(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>d,a:()=>o});var s=r(7294);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);