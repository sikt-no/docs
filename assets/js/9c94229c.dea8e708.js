"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[7890],{3905:(e,t,r)=>{r.d(t,{Zo:()=>g,kt:()=>k});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),p=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},g=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),m=p(r),k=a,u=m["".concat(o,".").concat(k)]||m[k]||d[k]||i;return r?n.createElement(u,l(l({ref:t},g),{},{components:r})):n.createElement(u,l({ref:t},g))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var p=2;p<i;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},725:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const i={description:"Oppskrift for hvordan man registrerer et enkelt API i Gravitee. I tillegg til \xe5 registrere API m\xe5 man opprette en eller flere planer.",title:"Registrere et enkelt API"},l="Registrere et enkelt API",s={unversionedId:"datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api",id:"datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api",title:"Registrere et enkelt API",description:"Oppskrift for hvordan man registrerer et enkelt API i Gravitee. I tillegg til \xe5 registrere API m\xe5 man opprette en eller flere planer.",source:"@site/docs/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api.md",sourceDirName:"datadeling/veiledere/api-manager",slug:"/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api",permalink:"/docs/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api",draft:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api.md",tags:[],version:"current",lastUpdatedAt:1678104585,formattedLastUpdatedAt:"Mar 6, 2023",frontMatter:{description:"Oppskrift for hvordan man registrerer et enkelt API i Gravitee. I tillegg til \xe5 registrere API m\xe5 man opprette en eller flere planer.",title:"Registrere et enkelt API"},sidebar:"datadeling",previous:{title:"F\xe5 tilgang til et API",permalink:"/docs/datadeling/veiledere/api-manager/api-manager-be-om-tilgang"},next:{title:"Forvaltning av tilganger til API",permalink:"/docs/datadeling/veiledere/api-manager/api-tilganger"}},o={},p=[{value:"General",id:"general",level:3},{value:"Gateway",id:"gateway",level:3},{value:"Plan",id:"plan",level:3},{value:"Doc",id:"doc",level:3},{value:"Deployment",id:"deployment",level:3}],g={toc:p};function d(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},g,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"registrere-et-enkelt-api"},"Registrere et enkelt API"),(0,a.kt)("p",null,"Oppskrift for hvordan man registrerer et enkelt API i Gravitee. I tillegg til \xe5 registrere API m\xe5 man opprette en eller flere planer."),(0,a.kt)("p",null,"Logg inn i API manager og g\xe5 p\xe5 siden for API. For \xe5 kunne registrere API her m\xe5 man ha rollen API Publisher. Kontakt adminstrator ved din enhet om du ikke har denne rollen."),(0,a.kt)("p",null,'G\xe5 f\xf8rst til oversikten over API ved \xe5 enten trykke p\xe5 brukerikonet \xf8verst til h\xf8yre, for s\xe5 \xe5 velge "Administration" eller ved \xe5 trykke p\xe5 APIs i sidemenyen til venstre. Klikk s\xe5 p\xe5 sirkelen med pluss-tegnet. Om du ikke ser dette har du ikke tilgang til \xe5 registrere API.'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Ny API",src:r(5045).Z,width:"1394",height:"893"})),(0,a.kt)("p",null,"P\xe5 neste side kan man velge om man vil importere API definisjonen eller opprette fra bunnen av. Om man har en eksport av API-et fra en annen Gravitee-installasjon eller har en API-definisjon i Open API-format/Swagger-fil, kan man bruke denne. Dette gj\xf8r registreringen raskere, men krever ofte at man gj\xf8r endringer eller retter opp i etterkant."),(0,a.kt)("p",null,"I denne veiledningen oppretter vi API-et fra bunnen av ved \xe5 trykke p\xe5 den bl\xe5 pilen."),(0,a.kt)("h3",{id:"general"},"General"),(0,a.kt)("p",null,"Fyll inn navn, versjonsnummer, beskrivelse og context-path for API-et. Bruk et godt beskrivende navn, og gi en utfyllende beskrivelse av funksjonen til API-et. Dette vil gj\xf8re API-et mye mer nyttig for andre."),(0,a.kt)("p",null,"Context-path er en del av URL-en til APIet. Eksempelet over som f\xf8rer til for UiOs gateway vil v\xe6re tilgjengelig p\xe5 URLen ",(0,a.kt)("a",{parentName:"p",href:"https://gw-uio.intark.uh-it.no/my-first-echo-api"},"https://gw-uio.intark.uh-it.no/my-first-echo-api")),(0,a.kt)("p",null,"Merk at disse path-ene er en begrenset ressurs. Registrerer man f.eks. et utviklings-API under /personer , vil en ikke ha mulighet til \xe5 registrere test-milj\xf8 under /personer/test. Da kan det v\xe6re bedre \xe5 bruke f.eks. /personer/utv/v1"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Context path example",src:r(4770).Z,width:"948",height:"534"})),(0,a.kt)("h3",{id:"gateway"},"Gateway"),(0,a.kt)("p",null,"Skriv inn URL til backend. Om API-et skal v\xe6re \xe5pent for alle er dette alt som trengs. Dersom API gateway m\xe5 autentisere seg, konfigurerer vi dette senere."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Legge til backend",src:r(645).Z,width:"1648",height:"425"})),(0,a.kt)("h3",{id:"plan"},"Plan"),(0,a.kt)("p",null,'Hvis det er \xf8nskelig, kan man her opprette en plan. Det er ogs\xe5 mulig \xe5 utsette dette ved \xe5 trykke "SKIP". I denne veiledningen er det kun mulig \xe5 opprette \xe5pne planer eller planer som bruker API-n\xf8kler. Vil man bruke OAuth 2 og/eller JWTs for autentisering m\xe5 disse opprettes etterp\xe5.'),(0,a.kt)("p",null,'Her er et eksempel p\xe5 en enkel plan. Den gir lese-tilgang til alle ressurser i APIet hvis man har en API-n\xf8kkel. Siden dette er et echo-API er det ikke n\xf8dvendig \xe5 ha noe sikring. For \xe5 gj\xf8re APIet helt \xe5pent, velg Keyless (Public). For \xe5 kunne se hvem som bruker et API, men fortsatt tillate alle som \xf8nsker \xe5 bruke det, kan man velge "auto-subscribe".'),(0,a.kt)("p",null,'Under Path Authorization kan man hviteliste eller svarteliste tilgang til ressurser. For denne planen har vi valgt at alle kan kj\xf8re oppslag ( GET http-verb ) for alle ressurser/"under-URLer" (/).'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Opprette plan",src:r(5843).Z,width:"1673",height:"707"})),(0,a.kt)("h3",{id:"doc"},"Doc"),(0,a.kt)("p",null,"Her kan man laste opp dokumentasjon. Dette kan v\xe6re html-sider (med f.eks. overordnet dokumentasjon) eller OpenAPI/swagger filer (brukes ofte som teknisk dokumentasjon). Det er ogs\xe5 mulig \xe5 importere dokumentasjon fra nett (\xe5pne websider eller git-repositories), eller skrive dokumentasjon direkte etter at API-et er opprettet."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Legge til dokumentasjon",src:r(9951).Z,width:"907",height:"429"})),(0,a.kt)("h3",{id:"deployment"},"Deployment"),(0,a.kt)("p",null,"P\xe5 siste side kan du velge om du vil opprette API-et uten \xe5 starte det, eller opprette og starte med en gang."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Etter \xe5 ha g\xe5tt gjennom veiledningen for \xe5 opprette API m\xe5 man gjerne finpusse litt f\xf8r API-et er helt klar til bruk."),(0,a.kt)("p",null,"Les mer om hvordan:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/datadeling/veiledere/api-manager/opprette-plan"},"Opprette flere planer")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/datadeling/veiledere/api-manager/backend"},"Autentisering mot backend")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/datadeling/veiledere/api-manager/legge-pa-enkel-policy"},"Legge policyes p\xe5 API")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/datadeling/veiledere/api-manager/varsling-for-api-eiere"},"Legge til flere mottakere av e-post"))))}d.isMDXComponent=!0},5045:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20200924095643-2-ef1203fafad0de8f3f5abf7e6ff5695f.png"},4770:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20200924102426-3-f4afb11e344480aa126e9a1f9487f436.png"},645:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20200924114923-2-df45a7d632dc4d99edba0685eb67ff0e.png"},5843:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20200924132314-3-4198a51efb781968fe839743f7d12034.png"},9951:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image-20200924133645-4-fdca10df12a3f77de0805ff5c7fc7544.png"}}]);