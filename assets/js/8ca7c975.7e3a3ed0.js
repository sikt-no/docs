"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[128],{308:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"api-pvt/01-02-oauth","title":"OAuth 2.0","description":"The Data Protection Services GraphQL API uses OAuth 2.0/OpenID Connect both internally and for external applications to make API calls on behalf of your organization.","source":"@site/docs/api-pvt/01-02-oauth.md","sourceDirName":"api-pvt","slug":"/api-pvt/01-02-oauth","permalink":"/docs/api-pvt/01-02-oauth","draft":false,"unlisted":false,"editUrl":"https://github.com/sikt-no/docs/tree/master/docs/api-pvt/01-02-oauth.md","tags":[],"version":"current","lastUpdatedAt":1737370725000,"frontMatter":{"title":"OAuth 2.0"},"sidebar":"api_pvt","previous":{"title":"GraphQL","permalink":"/docs/api-pvt/01-01-graphql"}}');var a=t(4848),s=t(8453);const r={title:"OAuth 2.0"},i=void 0,c={},l=[{value:"Request an access token (Service-to-service)",id:"request-an-access-token-service-to-service",level:2},{value:"Example",id:"example",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"The Data Protection Services GraphQL API uses OAuth 2.0/OpenID Connect both internally and for external applications to make API calls on behalf of your organization."}),"\n",(0,a.jsx)(n.h2,{id:"request-an-access-token-service-to-service",children:"Request an access token (Service-to-service)"}),"\n",(0,a.jsx)(n.p,{children:"To obtain an access token you will first need to register a client application, then use the generated client ID and client secret to get an access token."}),"\n",(0,a.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'$ CLIENT_ID=c3b7c6cf-9bd2-4053-be11-5fe94d6d4566\n$ CLIENT_SECRET=password\n$ SCOPE=org:0e7ecd50-650a-425d-a6e7-462eb1b3f1f2\n$ curl https://sso.nsd.no/oauth/token \\\n    -u $CLIENT_ID:$CLIENT_SECRET \\\n    -d "grant_type=client_credentials&scope=$SCOPE"\n\n{\n    "scope": "org:0e7ecd50-650a-425d-a6e7-462eb1b3f1f2",\n    "access_token": "eyJraWQiOiJjQTdxRz...",\n    "expires_in": 3600,\n    "token_type": "Bearer"\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You can now make API calls by passing the access token in the ",(0,a.jsx)(n.code,{children:"Authorization"})," header:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'$ TOKEN=...\n$ QUERY=\'query{organization(id: \\"af6fdcec-fcd6-4af2-8d61-03838b992344\\"){name}}\'\n$ curl -H \'Content-Type: application/json\' \\\n    -H "Authorization: Bearer $TOKEN" \\\n    -X POST \\\n    -d "{\\"query\\": \\"$QUERY\\"}" \\\n    https://api.nsd.no/graphql\n\n{\n    "data": {\n        "organization": {\n            "name": "NSD \u2013 Norsk senter for forskningsdata AS"\n        }\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Note: The current token endpoint, supported protocols and other metadata is available at ",(0,a.jsx)(n.a,{href:"https://sso.nsd.no/.well-known/openid-configuration",children:"https://sso.nsd.no/.well-known/openid-configuration"})]}),"\n",(0,a.jsx)(n.p,{children:"Further reading:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://oauth.net/2/",children:"https://oauth.net/2/"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc6749#section-4.4",children:"https://tools.ietf.org/html/rfc6749#section-4.4"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(6540);const a={},s=o.createContext(a);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);