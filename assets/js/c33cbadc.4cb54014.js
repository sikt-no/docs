"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[1591],{3982:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"iam/integrasjoner/Writebacktofs","title":"WritebackToFS","description":"Portalldapwritebacktofs","source":"@site/docs/iam/integrasjoner/Writebacktofs.md","sourceDirName":"iam/integrasjoner","slug":"/iam/integrasjoner/Writebacktofs","permalink":"/docs/iam/integrasjoner/Writebacktofs","draft":false,"unlisted":false,"editUrl":"https://github.com/sikt-no/docs/tree/master/docs/iam/integrasjoner/Writebacktofs.md","tags":[],"version":"current","lastUpdatedAt":1761829665000,"frontMatter":{"title":"WritebackToFS"},"sidebar":"iam","previous":{"title":"WritebackToDFO","permalink":"/docs/iam/integrasjoner/Writebacktodfo"},"next":{"title":"Felles IAM 4.0","permalink":"/docs/iam/versjoner/g4"}}');var i=s(4848),l=s(8453);const o={title:"WritebackToFS"},d=void 0,c={},t=[{value:"Portalldapwritebacktofs",id:"portalldapwritebacktofs",level:2},{value:"Description",id:"description",level:4},{value:"Input Parameters",id:"input-parameters",level:4},{value:"Local Variables",id:"local-variables",level:4},{value:"Workflow",id:"workflow",level:4},{value:"External Systems and Communications",id:"external-systems-and-communications",level:4},{value:"Response Codes/Outputs",id:"response-codesoutputs",level:4},{value:"Summary",id:"summary",level:4}];function a(e){const n={code:"code",em:"em",h2:"h2",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"portalldapwritebacktofs",children:"Portalldapwritebacktofs"}),"\n",(0,i.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"This script performs a writeback operation to update user information in FS (Felles Studentsystem). It processes user records from Portal LDAP and updates or creates user accounts in FS, including setting attributes such as username, email, and FS Fagperson status."}),"\n",(0,i.jsx)(n.h4,{id:"input-parameters",children:"Input Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_field"}),": Enum: ",(0,i.jsx)(n.code,{children:"username"}),", ",(0,i.jsx)(n.code,{children:"uh-username"}),", ",(0,i.jsx)(n.code,{children:"idautoID"})," (optional)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_value"}),": String (optional)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"debug"}),": Boolean (optional)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"log_only"}),": Boolean"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"process_all"}),": Boolean (optional)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"process_remaining"}),": Boolean (optional)"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"local-variables",children:"Local Variables"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"actionSetName"}),": Name of the current action set."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"processedAccounts"}),": Array to keep track of processed accounts."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"total"}),", ",(0,i.jsx)(n.code,{children:"totalSkipped"}),", ",(0,i.jsx)(n.code,{children:"totalUnchanged"}),", ",(0,i.jsx)(n.code,{children:"totalAdd"}),", ",(0,i.jsx)(n.code,{children:"totalAddFail"}),", ",(0,i.jsx)(n.code,{children:"totalUpdate"}),", ",(0,i.jsx)(n.code,{children:"totalUpdateFail"}),", ",(0,i.jsx)(n.code,{children:"totalDisable"}),", ",(0,i.jsx)(n.code,{children:"totalDisableFail"}),": Counters for various operations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fsWritebackEmployeeID"}),", ",(0,i.jsx)(n.code,{children:"fsWritebackMobilePhoneNumber"}),", ",(0,i.jsx)(n.code,{children:"fsWritebackOfficeNumber"}),", ",(0,i.jsx)(n.code,{children:"fsWritebackWithDomainName"}),", ",(0,i.jsx)(n.code,{children:"fsWritebackEmailAsSystem2ID"}),": Global variables for FS writeback settings."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inst"}),", ",(0,i.jsx)(n.code,{children:"rolesToUseIdPorten"}),", ",(0,i.jsx)(n.code,{children:"landIdTable"}),", ",(0,i.jsx)(n.code,{children:"orgTable"}),", ",(0,i.jsx)(n.code,{children:"campusTable"}),", ",(0,i.jsx)(n.code,{children:"fagpersonTable"}),": Global variables for various tables and settings."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"workflow",children:"Workflow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Initialize Variables"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Set initial values for counters and other variables."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create Connections"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Establish connections to Portal LDAP and FS GraphQL."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Log errors and invoke ",(0,i.jsx)(n.code,{children:"ErrorHandler"})," if any connection fails."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Codes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LDAP_CONNECTION_FAILED"}),": Failed to connect to Portal LDAP."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_GRAPHQL_CONNECTION_FAILED"}),": Failed to connect to FS GraphQL."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Fetch and Transform Data"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Query records based on ",(0,i.jsx)(n.code,{children:"key_field"})," and ",(0,i.jsx)(n.code,{children:"key_value"}),", or process all or remaining records."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Log and skip records with missing essential attributes."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Perform FS Operations"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create"}),": Add new users to FS.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Log errors and invoke ",(0,i.jsx)(n.code,{children:"ErrorHandler"})," on failure."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Codes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_CREATE_FAILED"}),": Failed to create a user in FS."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update"}),": Update existing users in FS.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Log errors and invoke ",(0,i.jsx)(n.code,{children:"ErrorHandler"})," on failure."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Codes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_UPDATE_FAILED"}),": Failed to update a user in FS."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Disable"}),": Disable users by removing username, email, and FS Fagperson status.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Log errors and invoke ",(0,i.jsx)(n.code,{children:"ErrorHandler"})," on failure."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Codes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_DISABLE_FAILED"}),": Failed to disable a user in FS."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Close Connections"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Close all established connections."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Log Results"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Log summaries of operations, including successes and failures."}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"external-systems-and-communications",children:"External Systems and Communications"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FS (Felles Studentsystem)"}),": Target system where user accounts are managed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Portal LDAP"}),": Source system for user data."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"response-codesoutputs",children:"Response Codes/Outputs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Codes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LDAP_CONNECTION_FAILED"}),": Failure in connecting to LDAP."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_GRAPHQL_CONNECTION_FAILED"}),": Failed to connect to FS GraphQL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_CREATE_FAILED"}),": Failed to create a user in FS."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_UPDATE_FAILED"}),": Failed to update a user in FS."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS_USER_DISABLE_FAILED"}),": Failed to disable a user in FS."]}),"\n",(0,i.jsx)(n.li,{children:"Other codes as defined in the workflow."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This script performs a writeback operation to update user information in FS. It handles various operations such as creating, updating, and disabling user accounts while logging all results and errors."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Written by AI (2025-10-30)"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>d});var r=s(6540);const i={},l=r.createContext(i);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);